{"ast":null,"code":"var _jsxFileName = \"D:\\\\BIG-PROJECT\\\\WIKI\\\\FE\\\\crmmentor\\\\src\\\\pages\\\\quan-ly-danh-sach-mentor\\\\QuanLyDanhSachMentor.js\",\n  _s = $RefreshSig$();\nimport { Spin, Table, message } from \"antd\";\nimport React, { useEffect, useState, useMemo, useReducer } from \"react\";\nimport { useSearchParams } from \"react-router-dom\";\nimport moment from \"moment\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { NguoiDungService } from '../../services/NguoiDungService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function QuanLyDanhSachMentor() {\n  _s();\n  //Search params\n  let [searchParams, setSearchParams] = useSearchParams({});\n\n  //   let dsChiNhanhKiemTra = searchParams.get(\"dscnkt\")\n  //     ? JSON.parse(searchParams.get(\"dscnkt\"))\n  //     : [];\n  //   let isChuaCoLopMentor = +searchParams.get(\"mtkcl\");\n  //   let isGroupByMentor = +searchParams.get(\"gbm\");\n\n  //Use Selector\n\n  const dsNguoiDung = useSelector(state => state.userReducer.dsNguoiDung);\n  const danhSachMentorChiNhanh = useSelector(state => state.quanLyMentorReducer.danhSachMentorChiNhanh);\n\n  // CONST\n\n  const [data, setData] = useState([]);\n  const colsTableQuanLyMentor = [{\n    title: \"Tên mentor\",\n    render: (text, record) => {\n      return record.hoTen;\n    },\n    key: \"hoTen\",\n    dataIndex: \"hoTen\"\n  }, {\n    title: \"Email\",\n    render: (text, record) => {\n      return record.email;\n    },\n    key: \"email\",\n    dataIndex: \"email\"\n  }, {\n    title: \"Số điện thoại\",\n    render: (text, record) => {\n      return record.soDT;\n    },\n    key: \"soDT\",\n    dataIndex: \"soDT\"\n  }, {\n    title: \"Chưa đăng ký mentor\",\n    render: (text, record) => {\n      return (danhSachMentorChiNhanh === null || danhSachMentorChiNhanh === void 0 ? void 0 : danhSachMentorChiNhanh.findIndex(item => item.id === record.id)) === -1 ? /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"X\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 93\n      }, this) : \"\";\n    },\n    key: \"chuaDangKyMentor\",\n    dataIndex: \"chuaDangKyMentor\"\n  }, {\n    title: \"Action\",\n    render: (text, record) => {\n      return /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-success\",\n        onClick: () => handleXoaMentor(record.id),\n        children: \"Xo\\xE1 mentor\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 16\n      }, this);\n    },\n    key: \"Action\",\n    dataIndex: \"Action\"\n  }];\n\n  //Use Effect\n\n  useEffect(() => {\n    let isMount = true;\n    if (isMount && (dsNguoiDung === null || dsNguoiDung === void 0 ? void 0 : dsNguoiDung.length) > 0) {\n      setData(locMentorTuNguoiDung(dsNguoiDung));\n    }\n    return () => {\n      isMount = false;\n    };\n  }, [dsNguoiDung.length]);\n\n  // Function\n  function locMentorTuNguoiDung(dsNguoiDung) {\n    let dsNguoiDungLength = dsNguoiDung.length;\n    let dataFiltered = [];\n    for (let i = 0; i < dsNguoiDungLength; i++) {\n      let record = dsNguoiDung[i];\n      if (record.maNhomQuyen !== \"MENTOR\") {\n        continue;\n      }\n      dataFiltered.push(record);\n    }\n    return dataFiltered;\n  }\n\n  //handle\n  function handleXoaMentor(idMentor) {\n    //\n    NguoiDungService.xoaMentorNguoiDungService(idMentor).then(res => {\n      message.info(\"Đã xoá thành công\");\n      let newData = [];\n      for (let i = 0; i < data.length; i++) {\n        let nguoiDung = data[i];\n        // console.log(nguoiDung)\n        if (nguoiDung.id === idMentor) {\n          continue;\n        }\n        newData.push(nguoiDung);\n      }\n      setData(newData);\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Danh S\\xE1ch Mentor\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Spin, {\n      spinning: (dsNguoiDung === null || dsNguoiDung === void 0 ? void 0 : dsNguoiDung.length) > 0 ? false : true,\n      tip: \"Loading....\",\n      children: /*#__PURE__*/_jsxDEV(Table, {\n        className: \"table table-striped\",\n        columns: colsTableQuanLyMentor,\n        dataSource: data,\n        bordered: true,\n        pagination: {\n          defaultPageSize: 10,\n          pageSizeOptions: [\"10\", \"15\", \"20\", \"30\", \"50\"],\n          showSizeChanger: true\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(QuanLyDanhSachMentor, \"9KQVJ6H1P9q6TkC++vun/HtzuUs=\", false, function () {\n  return [useSearchParams, useSelector, useSelector];\n});\n_c = QuanLyDanhSachMentor;\nvar _c;\n$RefreshReg$(_c, \"QuanLyDanhSachMentor\");","map":{"version":3,"names":["Spin","Table","message","React","useEffect","useState","useMemo","useReducer","useSearchParams","moment","useSelector","useDispatch","NguoiDungService","QuanLyDanhSachMentor","searchParams","setSearchParams","dsNguoiDung","state","userReducer","danhSachMentorChiNhanh","quanLyMentorReducer","data","setData","colsTableQuanLyMentor","title","render","text","record","hoTen","key","dataIndex","email","soDT","findIndex","item","id","handleXoaMentor","isMount","length","locMentorTuNguoiDung","dsNguoiDungLength","dataFiltered","i","maNhomQuyen","push","idMentor","xoaMentorNguoiDungService","then","res","info","newData","nguoiDung","defaultPageSize","pageSizeOptions","showSizeChanger"],"sources":["D:/BIG-PROJECT/WIKI/FE/crmmentor/src/pages/quan-ly-danh-sach-mentor/QuanLyDanhSachMentor.js"],"sourcesContent":["import { Spin, Table, message } from \"antd\";\r\nimport React, { useEffect, useState, useMemo, useReducer } from \"react\";\r\nimport { useSearchParams } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\n\r\nimport {NguoiDungService} from '../../services/NguoiDungService'\r\n\r\nexport default function QuanLyDanhSachMentor() {\r\n  //Search params\r\n  let [searchParams, setSearchParams] = useSearchParams({});\r\n\r\n  //   let dsChiNhanhKiemTra = searchParams.get(\"dscnkt\")\r\n  //     ? JSON.parse(searchParams.get(\"dscnkt\"))\r\n  //     : [];\r\n  //   let isChuaCoLopMentor = +searchParams.get(\"mtkcl\");\r\n  //   let isGroupByMentor = +searchParams.get(\"gbm\");\r\n\r\n  //Use Selector\r\n\r\n  const dsNguoiDung = useSelector((state) => state.userReducer.dsNguoiDung);\r\n\r\n  const danhSachMentorChiNhanh = useSelector((state) => state.quanLyMentorReducer.danhSachMentorChiNhanh);\r\n\r\n  // CONST\r\n\r\n  const [data, setData] = useState([]);\r\n\r\n  const colsTableQuanLyMentor = [\r\n    {\r\n      title: \"Tên mentor\",\r\n      render: (text, record) => {\r\n        return record.hoTen;\r\n      },\r\n      key: \"hoTen\",\r\n      dataIndex: \"hoTen\",\r\n    },\r\n    {\r\n      title: \"Email\",\r\n      render: (text, record) => {\r\n        return record.email;\r\n      },\r\n      key: \"email\",\r\n      dataIndex: \"email\",\r\n    },\r\n    {\r\n      title: \"Số điện thoại\",\r\n      render: (text, record) => {\r\n        return record.soDT;\r\n      },\r\n      key: \"soDT\",\r\n      dataIndex: \"soDT\",\r\n    },\r\n    {\r\n      title: \"Chưa đăng ký mentor\",\r\n      render: (text, record) => {\r\n        return danhSachMentorChiNhanh?.findIndex((item) => item.id === record.id) === -1 ? (<span>X</span>) : \"\";\r\n      },\r\n      key: \"chuaDangKyMentor\",\r\n      dataIndex: \"chuaDangKyMentor\",\r\n      \r\n    },\r\n    {\r\n      title: \"Action\",\r\n      render: (text, record) => {\r\n        return <button className=\"btn btn-success\" onClick={() => handleXoaMentor(record.id) }>Xoá mentor</button>;\r\n      },\r\n      key: \"Action\",\r\n      dataIndex: \"Action\",\r\n    },\r\n  ];\r\n\r\n  //Use Effect\r\n\r\n  useEffect(() => {\r\n    let isMount = true;\r\n\r\n    if (isMount && dsNguoiDung?.length > 0) {\r\n      setData(locMentorTuNguoiDung(dsNguoiDung));\r\n    }\r\n\r\n    return () => {\r\n      isMount = false;\r\n    };\r\n  }, [dsNguoiDung.length]);\r\n\r\n  // Function\r\n  function locMentorTuNguoiDung(dsNguoiDung) {\r\n    let dsNguoiDungLength = dsNguoiDung.length;\r\n    let dataFiltered = [];\r\n    for (let i = 0; i < dsNguoiDungLength; i++) {\r\n      let record = dsNguoiDung[i];\r\n      if (record.maNhomQuyen !== \"MENTOR\") {\r\n        continue;\r\n      }\r\n      dataFiltered.push(record);\r\n    }\r\n    return dataFiltered;\r\n  }\r\n\r\n  //handle\r\n  function handleXoaMentor(idMentor) {\r\n\r\n    //\r\n    NguoiDungService.xoaMentorNguoiDungService(idMentor)\r\n    .then((res) => {\r\n        message.info(\"Đã xoá thành công\")\r\n        let newData = []\r\n\r\n        for(let i = 0;i < data.length; i++) {\r\n            let nguoiDung = data[i]\r\n            // console.log(nguoiDung)\r\n            if (nguoiDung.id === idMentor) {\r\n                continue\r\n            }\r\n            newData.push(nguoiDung)\r\n        }\r\n        setData(newData)\r\n    })\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <h2>Danh Sách Mentor</h2>\r\n      <Spin spinning={dsNguoiDung?.length > 0 ? false : true} tip=\"Loading....\">\r\n        <Table\r\n        className=\"table table-striped\"\r\n          columns={colsTableQuanLyMentor}\r\n          dataSource={data}\r\n          bordered\r\n          pagination={{\r\n            defaultPageSize: 10,\r\n            pageSizeOptions: [\"10\", \"15\", \"20\", \"30\", \"50\"],\r\n            showSizeChanger: true,\r\n          }}\r\n        ></Table>\r\n      </Spin>\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
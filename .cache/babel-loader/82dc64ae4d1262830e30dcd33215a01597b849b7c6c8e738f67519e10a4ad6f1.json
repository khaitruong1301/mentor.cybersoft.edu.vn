{"ast":null,"code":"import _toConsumableArray from\"D:/BIG-PROJECT/WIKI/FE/crmmentor/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import React from'react';import{Empty,Tooltip,Tag,Skeleton}from'antd';import{useSelector}from'react-redux';import{DateFormat}from'../../utils/DateFormat';import{ListChuaCham}from'../../utils/ListChuaCham';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var MentorChuaCham=function MentorChuaCham(props){var dsMentorCreate=props.dsMentorCreate,dsKhachHang=props.dsKhachHang;var dsBaiTapDaCham=useSelector(function(state){return state.lopHocReducer.dsBaiTapDaCham;});var listChuaCham=ListChuaCham(dsBaiTapDaCham);var listMentor=null;// loc lai thong tin\nif(listChuaCham&&listChuaCham.length>0){listMentor=[];//lop\nlistChuaCham.map(function(item){//list chua cham co ten bai tap\nitem.lstBaiChuaCham.map(function(itemBaiTap){//danh mentor\nitemBaiTap.lstMentorChinh.map(function(itemMentor){var nguoiDung=dsMentorCreate.find(function(n){return n.id==itemMentor.mentorId;});var khachHang=dsKhachHang===null||dsKhachHang===void 0?void 0:dsKhachHang.filter(function(n){return n.thongTinKH.email==(nguoiDung===null||nguoiDung===void 0?void 0:nguoiDung.email);});var checkTonTai=listMentor&&listMentor.find(function(n){return n.id==itemMentor.mentorId;});var trungBinhBaiCham=0;if(itemBaiTap.tongBaiNop>0){//kiem tra so luong can cham: daCham >= Math.ceil(tongBaiNop / soLuongMentor); => lam tron len\ntrungBinhBaiCham=Math.ceil(itemBaiTap.tongBaiNop/itemBaiTap.lstMentorChinh.length);}if(trungBinhBaiCham>itemMentor.soLuongDaCham){if(checkTonTai){checkTonTai.listChuaCham=[].concat(_toConsumableArray(checkTonTai.listChuaCham),[{tieuDe:itemBaiTap.TieuDe,chuaCham:itemBaiTap.chuaCham,tenLopHoc:item.tenLopHoc}]);}else{listMentor.push({id:nguoiDung?nguoiDung.id:itemMentor.mentorId,hoTen:nguoiDung?nguoiDung.hoTen:itemMentor.mentorId+\" (xóa quyền)\",linkFacebook:khachHang[0]?khachHang[0].linkFacebook:null,listChuaCham:[{tieuDe:itemBaiTap.TieuDe,chuaCham:itemBaiTap.chuaCham,tenLopHoc:item.tenLopHoc}]});}}});});});}if(listMentor)return/*#__PURE__*/_jsx(\"div\",{className:\"row overflow-auto bg-light\",style:{height:\"100vh\"},children:listMentor.length>0?listMentor.map(function(item){return/*#__PURE__*/_jsx(\"div\",{class:\"col-lg-6  col-xl-3 \",children:/*#__PURE__*/_jsxs(\"div\",{class:\"card mt-2 \",children:[/*#__PURE__*/_jsx(\"div\",{class:\"card-header font-weight-bold\",children:/*#__PURE__*/_jsxs(_Fragment,{children:[item.hoTen,\"  \",/*#__PURE__*/_jsx(\"br\",{}),item.linkFacebook!=null?/*#__PURE__*/_jsxs(\"a\",{href:item.linkFacebook,target:\"_blank\",children:[\" \",/*#__PURE__*/_jsx(Tag,{color:\"blue\",children:\"Facebook\"})]}):/*#__PURE__*/_jsx(Tag,{children:\"Ch\\u01B0a c\\xF3 face\"})]})}),/*#__PURE__*/_jsxs(\"div\",{class:\"card-body\",children:[item.listChuaCham.map(function(itemChuaCham){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Tag,{color:\"red\",children:[itemChuaCham.tieuDe,\" \",/*#__PURE__*/_jsx(\"br\",{}),itemChuaCham.tenLopHoc,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"T\\u1ED5ng ch\\u01B0a ch\\u1EA5m: \",itemChuaCham.chuaCham]}),/*#__PURE__*/_jsx(\"p\",{})]});}),/*#__PURE__*/_jsx(Tag,{color:\"magenta\",children:\"\\u0110\\xE1nh gi\\xE1: 0/0\"})]})]})});}):/*#__PURE__*/_jsx(Empty,{})});else return/*#__PURE__*/_jsx(Skeleton,{active:true});};","map":{"version":3,"names":["React","Empty","Tooltip","Tag","Skeleton","useSelector","DateFormat","ListChuaCham","MentorChuaCham","props","dsMentorCreate","dsKhachHang","dsBaiTapDaCham","state","lopHocReducer","listChuaCham","listMentor","length","map","item","lstBaiChuaCham","itemBaiTap","lstMentorChinh","itemMentor","nguoiDung","find","n","id","mentorId","khachHang","filter","thongTinKH","email","checkTonTai","trungBinhBaiCham","tongBaiNop","Math","ceil","soLuongDaCham","tieuDe","TieuDe","chuaCham","tenLopHoc","push","hoTen","linkFacebook","height","itemChuaCham"],"sources":["D:/BIG-PROJECT/WIKI/FE/crmmentor/src/components/cardmentor/MentorChuaCham.jsx"],"sourcesContent":["import React from 'react';\r\nimport { Empty, Tooltip, Tag, Skeleton } from 'antd';\r\nimport { useSelector } from 'react-redux';\r\nimport { DateFormat } from '../../utils/DateFormat';\r\nimport { ListChuaCham } from '../../utils/ListChuaCham';\r\n\r\nexport const MentorChuaCham = (props) => {\r\n    let { dsMentorCreate, dsKhachHang } = props;\r\n\r\n    const dsBaiTapDaCham = useSelector(state => state.lopHocReducer.dsBaiTapDaCham);\r\n   \r\n    \r\n    let listChuaCham = ListChuaCham(dsBaiTapDaCham);\r\n\r\n    let listMentor = null;\r\n\r\n    // loc lai thong tin\r\n    if (listChuaCham && listChuaCham.length > 0) {\r\n        listMentor = [];\r\n        //lop\r\n        listChuaCham.map(item => {\r\n\r\n            //list chua cham co ten bai tap\r\n            item.lstBaiChuaCham.map(itemBaiTap => {\r\n\r\n                //danh mentor\r\n                itemBaiTap.lstMentorChinh.map(itemMentor => {\r\n                    let nguoiDung = dsMentorCreate.find(n => n.id == itemMentor.mentorId);\r\n\r\n                    let khachHang = dsKhachHang?.filter(n => n.thongTinKH.email == nguoiDung?.email);\r\n\r\n                    let checkTonTai = listMentor && listMentor.find(n => n.id == itemMentor.mentorId);\r\n\r\n                    let trungBinhBaiCham = 0;\r\n                    if (itemBaiTap.tongBaiNop > 0) {\r\n                        //kiem tra so luong can cham: daCham >= Math.ceil(tongBaiNop / soLuongMentor); => lam tron len\r\n                        trungBinhBaiCham = Math.ceil(itemBaiTap.tongBaiNop / itemBaiTap.lstMentorChinh.length);\r\n\r\n                    }\r\n\r\n                    if (trungBinhBaiCham > itemMentor.soLuongDaCham) {\r\n                        if (checkTonTai) {\r\n\r\n                            checkTonTai.listChuaCham = [...checkTonTai.listChuaCham, { tieuDe: itemBaiTap.TieuDe, chuaCham: itemBaiTap.chuaCham, tenLopHoc: item.tenLopHoc, }];\r\n\r\n                        } else {\r\n\r\n\r\n                            listMentor.push({\r\n                                id: nguoiDung ? nguoiDung.id : itemMentor.mentorId,\r\n                                hoTen: nguoiDung ? nguoiDung.hoTen : itemMentor.mentorId + \" (xóa quyền)\",\r\n                                linkFacebook: khachHang[0] ? khachHang[0].linkFacebook : null,\r\n                                listChuaCham: [{ tieuDe: itemBaiTap.TieuDe, chuaCham: itemBaiTap.chuaCham, tenLopHoc: item.tenLopHoc, }]\r\n                            })\r\n                        }\r\n                    }\r\n\r\n\r\n\r\n                })\r\n            })\r\n\r\n        })\r\n    }\r\n\r\n\r\n    if (listMentor)\r\n        return (\r\n            <div className='row overflow-auto bg-light' style={{ height: \"100vh\" }}>\r\n                {listMentor.length > 0 ? listMentor.map(item => {\r\n\r\n                    return <div class=\"col-lg-6  col-xl-3 \">\r\n                        <div class=\"card mt-2 \">\r\n                            <div class=\"card-header font-weight-bold\">\r\n                                {<>\r\n                                    {item.hoTen}  <br />\r\n                                    {item.linkFacebook != null ? <a href={item.linkFacebook} target=\"_blank\"> <Tag color=\"blue\" >Facebook</Tag></a> : <Tag>Chưa có face</Tag>}\r\n                                </>}\r\n                            </div>\r\n                            <div class=\"card-body\">\r\n                                {\r\n                                    item.listChuaCham.map(itemChuaCham => {\r\n                                        return <>\r\n                                            <Tag color='red'  >\r\n                                                {itemChuaCham.tieuDe} <br />\r\n                                                {itemChuaCham.tenLopHoc} <br />\r\n                                                Tổng chưa chấm: {itemChuaCham.chuaCham}\r\n                                            </Tag>\r\n                                            <p></p>\r\n                                        </>\r\n                                    })\r\n                                }\r\n                                <Tag color='magenta'>Đánh giá: 0/0</Tag>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                })\r\n                    :\r\n                    <Empty />\r\n                }\r\n            </div >\r\n        )\r\n    else\r\n        return (<Skeleton active />)\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _objectSpread from\"D:/BIG-PROJECT/WIKI/FE/crmmentor/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"D:/BIG-PROJECT/WIKI/FE/crmmentor/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import{tinhKhoangCachHaiNgay}from\"./DateFormat\";export var ListChuaCham=function ListChuaCham(dsBaiTapDaCham){var danhSachBaiTapChuaCham=[];var hanChamBai=8;if(dsBaiTapDaCham!=null)dsBaiTapDaCham.map(function(itemDaCham){var ngayHeThong=new Date(itemDaCham.ngayHeThong);var danhSachBuoiHocNew=itemDaCham.lopHoc.danhSachBuoiHocNew;var danhSachBuoiHoc=danhSachBuoiHocNew.length>0&&danhSachBuoiHocNew!=\"\"?JSON.parse(danhSachBuoiHocNew):[];var danhSachHocVien=itemDaCham.lopHoc.danhSachHocVien?JSON.parse(itemDaCham.lopHoc.danhSachHocVien):[];var danhSachMentor=itemDaCham.lopHoc.danhSachHocVien?JSON.parse(itemDaCham.lopHoc.danhSachMentor):[];var danhSachBaiTap=[];danhSachBuoiHoc.map(function(item){danhSachBaiTap.push.apply(danhSachBaiTap,_toConsumableArray(item.BaiTap.danhSachBaiHoc).concat(_toConsumableArray(item.Capstone.danhSachBaiHoc)));});var lstBaiTapNop=itemDaCham.lstBaiTapNop;var lstBaiChuaCham=[];danhSachBaiTap.map(function(item){var tongBaiNop=lstBaiTapNop.filter(function(n){return n.maBaiHoc==item.Id;});//loc cac hoc vien da nghi hoc nhung co nop bai\ntongBaiNop=tongBaiNop.filter(function(item){if(danhSachHocVien.findIndex(function(n){return n==item.maNguoiDung;})!=-1)return item;});var ngayHetHan=new Date(item.NgayHetHan);var soNgayCham=hanChamBai-tinhKhoangCachHaiNgay(ngayHeThong,ngayHetHan);if(ngayHeThong>ngayHetHan&&soNgayCham<=0){//loc bai tap chua cham \nvar lstChuaCham=tongBaiNop.filter(function(n){return n.diem==-1;});if(lstChuaCham.length>0){//loc mentor cham bai chinh\nvar lstMentorChinh=[];danhSachMentor.map(function(itemMentor){var demDaCham=tongBaiNop.filter(function(n){return n.nguoiCham==itemMentor;});lstMentorChinh.push({mentorId:itemMentor,soLuongDaCham:demDaCham.length});});//add class chua cham\nlstBaiChuaCham.push(_objectSpread(_objectSpread({},item),{},{tongBaiNop:tongBaiNop.length,chuaCham:lstChuaCham.length,lstMentorChinh:lstMentorChinh}));}}});//them list chua cham và noi dung lop\nif(lstBaiChuaCham.length>0)danhSachBaiTapChuaCham.push({tenLopHoc:itemDaCham.lopHoc.tenLopHoc,lstBaiChuaCham:lstBaiChuaCham});});return danhSachBaiTapChuaCham;};export var ListXepHangDanhGia=function ListXepHangDanhGia(danhSachDanhGia){var listDanhGia=[];danhSachDanhGia.map(function(item,index){var mentorId=item.mentorId,noiDung=item.noiDung;var checkDanhGia=listDanhGia.find(function(n){return n.mentorId==mentorId;});// noiDung = noiDung.replaceAll('\\n', \"\")\ntry{var diemDanhGia=item&&noiDung?JSON.parse(noiDung):[];var congDiem=0;//check diem 4 va 5 thi moi cong\ndiemDanhGia.map(function(itemDiem){return congDiem+=itemDiem>3?itemDiem:0;});if(checkDanhGia){checkDanhGia.soLuong+=1;checkDanhGia.tongDiem+=congDiem;}else{listDanhGia.push({mentorId:mentorId,soLuong:1,tongDiem:congDiem});}}catch(error){// console.log(item)\n}});listDanhGia.sort(function(a,b){return b.tongDiem-a.tongDiem;});listDanhGia[0]=_objectSpread(_objectSpread({},listDanhGia[0]),{},{top:1});listDanhGia[1]=_objectSpread(_objectSpread({},listDanhGia[1]),{},{top:2});listDanhGia[2]=_objectSpread(_objectSpread({},listDanhGia[2]),{},{top:3});return listDanhGia;};","map":{"version":3,"names":["tinhKhoangCachHaiNgay","ListChuaCham","dsBaiTapDaCham","danhSachBaiTapChuaCham","hanChamBai","map","itemDaCham","ngayHeThong","Date","danhSachBuoiHocNew","lopHoc","danhSachBuoiHoc","length","JSON","parse","danhSachHocVien","danhSachMentor","danhSachBaiTap","item","push","BaiTap","danhSachBaiHoc","Capstone","lstBaiTapNop","lstBaiChuaCham","tongBaiNop","filter","n","maBaiHoc","Id","findIndex","maNguoiDung","ngayHetHan","NgayHetHan","soNgayCham","lstChuaCham","diem","lstMentorChinh","itemMentor","demDaCham","nguoiCham","mentorId","soLuongDaCham","chuaCham","tenLopHoc","ListXepHangDanhGia","danhSachDanhGia","listDanhGia","index","noiDung","checkDanhGia","find","diemDanhGia","congDiem","itemDiem","soLuong","tongDiem","error","sort","a","b","top"],"sources":["D:/BIG-PROJECT/WIKI/FE/crmmentor/src/utils/ListChuaCham.js"],"sourcesContent":["import { tinhKhoangCachHaiNgay } from \"./DateFormat\";\r\n\r\n\r\nexport const ListChuaCham = (dsBaiTapDaCham) => {\r\n\r\n    let danhSachBaiTapChuaCham = [];\r\n\r\n    const hanChamBai = 8;\r\n    if (dsBaiTapDaCham != null)\r\n\r\n        dsBaiTapDaCham.map(itemDaCham => {\r\n            let ngayHeThong = new Date(itemDaCham.ngayHeThong);\r\n\r\n            const { danhSachBuoiHocNew } = itemDaCham.lopHoc;\r\n            const danhSachBuoiHoc = danhSachBuoiHocNew.length > 0 && danhSachBuoiHocNew != \"\" ? JSON.parse(danhSachBuoiHocNew) : [];\r\n\r\n            const danhSachHocVien = itemDaCham.lopHoc.danhSachHocVien ? JSON.parse(itemDaCham.lopHoc.danhSachHocVien) : [];\r\n            const danhSachMentor = itemDaCham.lopHoc.danhSachHocVien ? JSON.parse(itemDaCham.lopHoc.danhSachMentor) : [];\r\n\r\n            const danhSachBaiTap = [];\r\n            danhSachBuoiHoc.map(item => {\r\n\r\n                danhSachBaiTap.push(...item.BaiTap.danhSachBaiHoc, ...item.Capstone.danhSachBaiHoc);\r\n\r\n            })\r\n\r\n            let { lstBaiTapNop } = itemDaCham;\r\n            let lstBaiChuaCham = [];\r\n            danhSachBaiTap.map(item => {\r\n                let tongBaiNop = lstBaiTapNop.filter(n => n.maBaiHoc == item.Id);\r\n\r\n\r\n                //loc cac hoc vien da nghi hoc nhung co nop bai\r\n                tongBaiNop = tongBaiNop.filter(item => {\r\n\r\n                    if (danhSachHocVien.findIndex(n => n == item.maNguoiDung) != -1)\r\n                        return item;\r\n                })\r\n\r\n                let ngayHetHan = new Date(item.NgayHetHan);\r\n                let soNgayCham = hanChamBai - tinhKhoangCachHaiNgay(ngayHeThong, ngayHetHan);\r\n\r\n                if (ngayHeThong > ngayHetHan && soNgayCham <= 0) {\r\n\r\n                    //loc bai tap chua cham \r\n                    let lstChuaCham = tongBaiNop.filter(n => n.diem == -1);\r\n\r\n                    if (lstChuaCham.length > 0) {\r\n\r\n                        //loc mentor cham bai chinh\r\n                        let lstMentorChinh = [];\r\n                        danhSachMentor.map(itemMentor => {\r\n                            let demDaCham = tongBaiNop.filter(n => n.nguoiCham == itemMentor);\r\n                            lstMentorChinh.push({ mentorId: itemMentor, soLuongDaCham: demDaCham.length });\r\n                        })\r\n\r\n\r\n                        //add class chua cham\r\n                        lstBaiChuaCham.push({\r\n                            ...item,\r\n                            tongBaiNop: tongBaiNop.length,\r\n                            chuaCham: lstChuaCham.length,\r\n                            lstMentorChinh\r\n                        });\r\n                    }\r\n                }\r\n            })\r\n\r\n            //them list chua cham và noi dung lop\r\n            if (lstBaiChuaCham.length > 0)\r\n                danhSachBaiTapChuaCham.push({\r\n                    tenLopHoc: itemDaCham.lopHoc.tenLopHoc,\r\n                    lstBaiChuaCham\r\n                })\r\n        });\r\n    return danhSachBaiTapChuaCham;\r\n\r\n}\r\n\r\n\r\nexport const ListXepHangDanhGia = (danhSachDanhGia) => {\r\n\r\n    let listDanhGia = [];\r\n\r\n    danhSachDanhGia.map((item,index) => {\r\n        let { mentorId, noiDung } = item;\r\n        let checkDanhGia = listDanhGia.find(n => n.mentorId == mentorId);\r\n            // noiDung = noiDung.replaceAll('\\n', \"\")\r\n            try {\r\n                 let diemDanhGia = item && noiDung ? JSON.parse(noiDung) : [];\r\n let congDiem = 0;\r\n        //check diem 4 va 5 thi moi cong\r\n        diemDanhGia.map(itemDiem => congDiem += itemDiem > 3 ? itemDiem : 0);\r\n\r\n        if (checkDanhGia) {\r\n            checkDanhGia.soLuong += 1;\r\n            checkDanhGia.tongDiem += congDiem;\r\n        }\r\n        else {\r\n\r\n            listDanhGia.push({\r\n                mentorId,\r\n                soLuong: 1,\r\n                tongDiem: congDiem\r\n            })\r\n        }\r\n\r\n            } catch (error) {\r\n                // console.log(item)\r\n            }\r\n           \r\n       \r\n        \r\n\r\n       \r\n    })\r\n\r\n    listDanhGia.sort((a, b) => b.tongDiem - a.tongDiem);\r\n\r\n    listDanhGia[0] = {...listDanhGia[0],top:1};\r\n    listDanhGia[1] = {...listDanhGia[1],top:2};\r\n    listDanhGia[2] = {...listDanhGia[2],top:3};\r\n\r\n    return listDanhGia;\r\n\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
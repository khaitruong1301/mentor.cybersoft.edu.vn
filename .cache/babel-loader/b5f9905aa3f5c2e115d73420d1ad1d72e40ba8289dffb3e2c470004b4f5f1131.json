{"ast":null,"code":"import _toConsumableArray from\"D:/BIG-PROJECT/WIKI/FE/crmmentor/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"D:/BIG-PROJECT/WIKI/FE/crmmentor/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/BIG-PROJECT/WIKI/FE/crmmentor/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"D:/BIG-PROJECT/WIKI/FE/crmmentor/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/BIG-PROJECT/WIKI/FE/crmmentor/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useMemo,useReducer}from\"react\";import{DatePicker,Tag,Select,Checkbox,Table,Input,InputNumber,Button,Modal,message,Radio,Spin,Tooltip,Rate,Badge,Switch,Popconfirm}from\"antd\";import{useSearchParams}from\"react-router-dom\";import moment from\"moment\";import{useSelector,useDispatch}from\"react-redux\";import{BulbFilled}from\"@ant-design/icons\";import{removeVietnameseTones}from\"../../utils\";import _ from\"lodash\";import{callApiDanhSachDanhGiaCrmTheoThang,updateNhacNhoMentor}from\"../../redux/reducers/danhGiaMentorReducer\";import{AdminService}from\"../../services/AdminService\";import{ClassStatusSwitch}from\"../../utils/SelectOption\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Option=Select.Option;var Search=Input.Search;var MonthPicker=DatePicker.MonthPicker,RangePicker=DatePicker.RangePicker,WeekPicker=DatePicker.WeekPicker;var initialState={isLoading:false,data:[],isModalChiTietDanhGiaVisible:false,recordDangChon:{}};var CONSTANTS={SET_IS_LOADING:\"SET_IS_LOADING\",SET_DATA:\"SET_DATA\",SET_MODAL_CHI_TIET_DANH_GIA_VISIBLE:\"SET_MODAL_CHI_TIET_DANH_GIA_VISIBLE\",SET_RECORD_XEM_CHI_TIET_DANH_GIA:\"SET_RECORD_XEM_CHI_TIET_DANH_GIA\"};function asyncThing(value){return new Promise(function(resolve){setTimeout(function(){return resolve(value);},100);});}export default function DanhGiaMentorV3(){var _dsConfig$find;var dispatch=useDispatch();var thangTruoc=new Date();thangTruoc.setDate(1);thangTruoc.setMonth(thangTruoc.getMonth()-1);var _useSearchParams=useSearchParams({type_search:\"tenLop\",value_search:\"\",theo_day:\"null\",theo_month:thangTruoc,nx:0,tieuChi:\"[0,1,2,3,4,5]\",diemTu:\"-1\",diemDen:\"-1\",loai_gv:2,cb:0,tgm:\"Tatca\",dscnkt:\"[]\",mtkcl:0,gbm:0,tfbvl:1}),_useSearchParams2=_slicedToArray(_useSearchParams,2),searchParams=_useSearchParams2[0],setSearchParams=_useSearchParams2[1];//get range date value\nvar rangeValue=null;if(searchParams.get(\"theo_day\")!=\"null\"){rangeValue=JSON.parse(searchParams.get(\"theo_day\"));rangeValue=[moment(rangeValue[0]),moment(rangeValue[1])];}var inputSearchType=searchParams.get(\"type_search\");var theoThang=searchParams.get(\"theo_month\")?searchParams.get(\"theo_month\"):\"null\";var inputSearchValue=searchParams.get(\"value_search\");var tieuChi=null;if(searchParams.get(\"tieuChi\")!=\"null\"){tieuChi=JSON.parse(searchParams.get(\"tieuChi\"));}var diemTu=Number(searchParams.get(\"diemTu\"));var diemDen=Number(searchParams.get(\"diemDen\"));var isCoNhanXet=+searchParams.get(\"nx\");var loaiNguoiDung=searchParams.get(\"loai_gv\")?+searchParams.get(\"loai_gv\"):2;var isChuaChamBai=+searchParams.get(\"cb\");var thoiGianMentor=searchParams.get(\"tgm\")?searchParams.get(\"tgm\"):\"Tatca\";var dsChiNhanhKiemTra=searchParams.get(\"dscnkt\")?JSON.parse(searchParams.get(\"dscnkt\")):[];var isChuaCoLopMentor=+searchParams.get(\"mtkcl\");var isGroupByMentor=+searchParams.get(\"gbm\");var isTatFilterThoiGianVaLopMentor=+searchParams.get(\"tfbvl\");var reducer=function reducer(state,_ref){var type=_ref.type,payload=_ref.payload;switch(type){case CONSTANTS.SET_IS_LOADING:return _objectSpread(_objectSpread({},state),{},{isLoading:true});case CONSTANTS.SET_DATA:return _objectSpread(_objectSpread({},state),{},{data:payload});case CONSTANTS.SET_MODAL_CHI_TIET_DANH_GIA_VISIBLE:return _objectSpread(_objectSpread({},state),{},{isModalChiTietDanhGiaVisible:payload});case CONSTANTS.SET_RECORD_XEM_CHI_TIET_DANH_GIA:return _objectSpread(_objectSpread({},state),{},{isModalChiTietDanhGiaVisible:true,recordDangChon:payload});default:return state;}};var _useReducer=useReducer(reducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatchLocal=_useReducer2[1];var dsNguoiDungObject=useSelector(function(state){return state.userReducer.dsNguoiDungObject;});var danhSachLopObject=useSelector(function(state){return state.lopHocReducer.danhSachLopObject;});var dsConfig=useSelector(function(state){return state.adminReducer.dsConfig;});var LICH_HOC=JSON.parse(dsConfig===null||dsConfig===void 0?void 0:(_dsConfig$find=dsConfig.find(function(item){return item.id===\"LICH_HOC\";}))===null||_dsConfig$find===void 0?void 0:_dsConfig$find.noiDung);var danhMucDanhGia=useSelector(function(state){return state.danhGiaMentorReducer.danhMucDanhGia;});var dsChiNhanh=useSelector(function(state){return state.lopHocReducer.dsChiNhanh;});var dsMentorChiNhanh=useSelector(function(state){return state.quanLyMentorReducer.danhSachMentorChiNhanh;});var danhSachDanhGiaCrmTheoThang=useSelector(function(state){return state.danhGiaMentorReducer.danhSachDanhGiaCrmTheoThang;});var _useMemo=useMemo(function(){return groupDanhSachDanhGiaCrmTheoThangByMentor(danhSachDanhGiaCrmTheoThang);},[danhSachDanhGiaCrmTheoThang.length]),_useMemo2=_slicedToArray(_useMemo,2),danhSachDanhGiaCrmTheoThangGroupByMentor=_useMemo2[0],danhSachMentorIdCoLop=_useMemo2[1];var isLoading=useSelector(function(state){return state.danhGiaMentorReducer.isLoading;});var danhSachMentorChuaChamBai=useSelector(function(state){return state.danhGiaMentorReducer.danhSachMentorChuaChamBai;});var OPTIONS_THOI_GIAN_MENTOR=[{value:\"Sang\",label:\"Sáng\"},{value:\"Chieu\",label:\"Chiều\"},{value:\"Tatca\",label:\"Tất cả\"}];useEffect(function(){var isMount=true;if(isMount){handleFilterData();}return function(){isMount=false;};},[isChuaCoLopMentor,isGroupByMentor,thoiGianMentor,isTatFilterThoiGianVaLopMentor]);useEffect(function(){var isMount=true;if(isMount){handleFilterData();}return function(){isMount=false;};},[danhSachDanhGiaCrmTheoThang]);function groupDanhSachDanhGiaCrmTheoThangByMentor(danhSachDanhGiaMentorCrmTheoThang){var dataGroup=[];var groupIdMentor=[];var lengthDanhSachDanhGia=danhSachDanhGiaCrmTheoThang.length;var _loop=function _loop(i){var record=danhSachDanhGiaCrmTheoThang[i];// check chưa có trong data group thì thêm vào\nif(!groupIdMentor.includes(record.MentorId)){var newArrayMaLop=[record.MaLop];groupIdMentor.push(record.MentorId);dataGroup.push(_objectSpread(_objectSpread({},record),{},{DanhSachMaLop:newArrayMaLop,SoLopDangMentor:1}));return\"continue\";}// co trong data group thì gộp data\n//lay thang dang co ra\nvar recordDaLuu=dataGroup.find(function(item){return item.MentorId===record.MentorId;});var dataDanhGiaDaLuu=JSON.parse(recordDaLuu.DanhSachDanhGia);var dataDanhGiaChuaLuu=JSON.parse(record.DanhSachDanhGia);var danhSachMerge=dataDanhGiaDaLuu.concat(dataDanhGiaChuaLuu);recordDaLuu.DanhSachMaLop.push(record.MaLop);recordDaLuu.SoLopDangMentor+=1;recordDaLuu.DanhSachDanhGia=JSON.stringify(danhSachMerge);};for(var i=0;i<lengthDanhSachDanhGia;i++){var _ret=_loop(i);if(_ret===\"continue\")continue;}return[dataGroup,groupIdMentor];}function tinhDiemDuaTheoTieuChi(dataDiem,tieuChiArray){var count=0;var tongDiem=0;dataDiem.map(function(item){//moi item la mot array\nitem===null||item===void 0?void 0:item.ChiTietDanhGia.map(function(item,index){//chi nhung index o vao tieu chi thi moi push vao arrayDiem\nif(tieuChiArray===null){tongDiem+=item===null||item===void 0?void 0:item.DiemDanhGia;count+=1;}else if(tieuChiArray.includes(index)){tongDiem+=item===null||item===void 0?void 0:item.DiemDanhGia;count+=1;}});});return tongDiem/count;}function kiemTraTrangThaiTable(isGroupByMentor,isChuaCoLopMentor){if(isGroupByMentor)return isChuaCoLopMentor?colMentorChuaCoLop:colMentorCoLopGroupByMentor;return isChuaCoLopMentor?colMentorChuaCoLop:colMentorCoLop;}function locTheoLoaiNguoiDung(_x,_x2){return _locTheoLoaiNguoiDung.apply(this,arguments);}function _locTheoLoaiNguoiDung(){_locTheoLoaiNguoiDung=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(data,loaiNguoiDung){var loaiNguoiDungCanCheck,arrTemp;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:loaiNguoiDungCanCheck=loaiNguoiDung===1?\"GIANGVIEN\":\"MENTOR\";_context2.t0=Promise;_context2.next=4;return asyncThing(data);case 4:_context2.t1=_context2.sent;_context2.next=7;return _context2.t0.all.call(_context2.t0,_context2.t1);case 7:arrTemp=_context2.sent;return _context2.abrupt(\"return\",arrTemp.filter(function(item){return item.MaNhomQuyen===loaiNguoiDungCanCheck;}));case 9:case\"end\":return _context2.stop();}}},_callee2);}));return _locTheoLoaiNguoiDung.apply(this,arguments);}function locChuaChamBai(_x3,_x4){return _locChuaChamBai.apply(this,arguments);}function _locChuaChamBai(){_locChuaChamBai=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(data,danhSachMentorChuaChamBai){var arrTemp;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.t0=Promise;_context3.next=3;return asyncThing(data);case 3:_context3.t1=_context3.sent;_context3.next=6;return _context3.t0.all.call(_context3.t0,_context3.t1);case 6:arrTemp=_context3.sent;return _context3.abrupt(\"return\",arrTemp.filter(function(item){var isCoTenTrongDanhSach=danhSachMentorChuaChamBai.hasOwnProperty(item.MentorId);var isLopChuaCham=false;if(isCoTenTrongDanhSach){isLopChuaCham=danhSachMentorChuaChamBai[item.MentorId].danhSachCacLopQuaHanCham.hasOwnProperty(item.MaLop);}return isCoTenTrongDanhSach&&isLopChuaCham;}));case 8:case\"end\":return _context3.stop();}}},_callee3);}));return _locChuaChamBai.apply(this,arguments);}function checkString(dataCheck,inputValue){return removeVietnameseTones(dataCheck.toString()).toLowerCase().includes(removeVietnameseTones(inputValue).toLowerCase());}function locTheoInputKiemTra(_x5,_x6,_x7){return _locTheoInputKiemTra.apply(this,arguments);}function _locTheoInputKiemTra(){_locTheoInputKiemTra=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(data,type,inputValue){var arrTemp;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.t0=Promise;_context4.next=3;return asyncThing(data);case 3:_context4.t1=_context4.sent;_context4.next=6;return _context4.t0.all.call(_context4.t0,_context4.t1);case 6:arrTemp=_context4.sent;return _context4.abrupt(\"return\",arrTemp.filter(function(item){// let isKiemTraDiemDanhGia = diemTu !== -1;\n// let isDuDieuKien = true;\n// if (isKiemTraDiemDanhGia) {\n//   isDuDieuKien = JSON.parse(item.NoiDungDanhGia)?.some(\n//     (item) => item.DiemDanhGia >= diemTu && item.DiemDanhGia <= diemDen\n//   );\n// }\n// if (isCoNhanXet) {\n//   isDuDieuKien = JSON.parse(item.NoiDungDanhGia)?.some(\n//     (item) => item.NhanXet.trim() !== \"\"\n//   );\n// }\nswitch(type){case\"tenLop\":return checkString(item.TenLopHoc,inputValue);case\"hoTen\":return checkString(item.HoTen,inputValue);case\"email\":return checkString(item.Email,inputValue);case\"soDienThoai\":return checkString(item.SoDT,inputValue);default:return false;}}));case 8:case\"end\":return _context4.stop();}}},_callee4);}));return _locTheoInputKiemTra.apply(this,arguments);}function locDanhSachMentorDangCoLopCoTheMentor(dsMentorChiNhanh,thoiGianMentor,dsChiNhanhKiemTra,dataFiltered){// console.log({thoiGianMentor, dsChiNhanhKiemTra})\nvar lsMentorCoTheMentor=locCacMentorCoTheMentorTheoChiNhanhVaThoiGian(dsMentorChiNhanh,thoiGianMentor,dsChiNhanhKiemTra);// console.log(lsMentorCoTheMentor)\nvar data=[];for(var i=0;i<dataFiltered.length;i++){var record=dataFiltered[i];// console.log(record)\nif(lsMentorCoTheMentor.includes(record.MentorId)){data.push(record);}}return data;}function locCacMentorCoTheMentorTheoChiNhanhVaThoiGian(dsMentorChiNhanh,thoiGianMentor,dsChiNhanhKiemTra){var lsMentorCoTheMentor=[];for(var i=0;i<dsMentorChiNhanh.length;i++){var record=dsMentorChiNhanh[i];// Nếu chọn tất cả thì đá tụi sáng và chiều ra không xử lý\nif(thoiGianMentor===\"Tatca\"){if(record.thoiGianMentor!==thoiGianMentor){continue;}}else{if(record.thoiGianMentor!==\"Tatca\"&&record.thoiGianMentor!==thoiGianMentor){continue;}}// Nếu chọn sáng hoặc chiều thì gom thêm thằng tất cả vào\n// neu ma khong chon chi nhanh thi lum het mentor dang ky vao\nif(dsChiNhanhKiemTra.length===0){lsMentorCoTheMentor.push(record.id);}else{var dsChiNhanhCoTheMentor=JSON.parse(record.danhSachChiNhanhMentor);for(var j=0;j<dsChiNhanhCoTheMentor.length;j++){if(dsChiNhanhKiemTra.includes(dsChiNhanhCoTheMentor[j])){lsMentorCoTheMentor.push(record.id);break;}}}}return lsMentorCoTheMentor;}function locDanhSachMentorChuaCoLopCoTheMentor(dsMentorChiNhanh,thoiGianMentor,dsChiNhanhKiemTra,dataFiltered){// Mentor chua co lop la cac mentor thoa dieu kien nhung khong nam trong datafiletered\nvar lsMentorCoTheMentor=locCacMentorCoTheMentorTheoChiNhanhVaThoiGian(dsMentorChiNhanh,thoiGianMentor,dsChiNhanhKiemTra);var lsMentorDaCoLop=[];for(var i=0;i<dataFiltered.length;i++){var lopHoc=dataFiltered[i];if(lsMentorDaCoLop.includes(lopHoc.MentorId)){// co roi thi next\ncontinue;}lsMentorDaCoLop.push(lopHoc.MentorId);}// console.log(lsMentorCoTheMentor)\n// console.log(lsMentorCoTheMentor)\nvar data=[];var _loop2=function _loop2(_i){var mentorId=lsMentorCoTheMentor[_i];//  console.log(lsMentorDaCoLop)\nif(!lsMentorDaCoLop.includes(mentorId)){var _dsNguoiDungObject$me=dsNguoiDungObject[mentorId],hoTen=_dsNguoiDungObject$me.hoTen,email=_dsNguoiDungObject$me.email,soDT=_dsNguoiDungObject$me.soDT;var _dsMentorChiNhanh$fin=dsMentorChiNhanh.find(function(item){return item.id===mentorId;}),_thoiGianMentor=_dsMentorChiNhanh$fin.thoiGianMentor,danhSachChiNhanhMentor=_dsMentorChiNhanh$fin.danhSachChiNhanhMentor;data.push({MentorId:mentorId,HoTen:hoTen,Email:email,SoDT:soDT,MaNhomQuyen:\"MENTOR\",TenLopHoc:\"Chưa có lớp\",MaLop:0,DanhSachDanhGia:\"[]\",DanhSachNhacNho:null,ThoiGianMentor:_thoiGianMentor,DanhSachChiNhanhMentor:danhSachChiNhanhMentor});}};for(var _i=0;_i<lsMentorCoTheMentor.length;_i++){_loop2(_i);}return data;}var handleFilterData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var dataFiltered;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:try{dataFiltered=[];if((danhSachDanhGiaCrmTheoThang===null||danhSachDanhGiaCrmTheoThang===void 0?void 0:danhSachDanhGiaCrmTheoThang.length)>0&&isGroupByMentor){dataFiltered=danhSachDanhGiaCrmTheoThangGroupByMentor;}else if((danhSachDanhGiaCrmTheoThang===null||danhSachDanhGiaCrmTheoThang===void 0?void 0:danhSachDanhGiaCrmTheoThang.length)>0){dataFiltered=danhSachDanhGiaCrmTheoThang;}if(isChuaCoLopMentor){dataFiltered=locDanhSachMentorChuaCoLopCoTheMentor(dsMentorChiNhanh,thoiGianMentor,dsChiNhanhKiemTra,dataFiltered);}else{if(!isTatFilterThoiGianVaLopMentor){dataFiltered=locDanhSachMentorDangCoLopCoTheMentor(dsMentorChiNhanh,thoiGianMentor,dsChiNhanhKiemTra,dataFiltered);}}// console.log(dataFiltered)\n// Kiem tra xem co filter theo loai nguoi dung khong\nif(loaiNguoiDung>0){locTheoLoaiNguoiDung(dataFiltered,loaiNguoiDung).then(function(res){dataFiltered=res;});}// Kiem tra xem co filter theo ngay thang gi khong\n// if (searchParams.get(\"theo_day\") !== \"null\") {\n//   locTheoKhoangThoiGian(dataFiltered, rangeValue).then((res) => {\n//     dataFiltered = res;\n//   });\n// }\n// if (searchParams.get(\"theo_month\") !== \"null\") {\n//   locTheoThang(dataFiltered, theoThang).then((res) => {\n//     dataFiltered = res;\n//   });\n// }\nif(danhSachMentorChuaChamBai&&isChuaChamBai){locChuaChamBai(dataFiltered,danhSachMentorChuaChamBai).then(function(res){dataFiltered=res;});}asyncThing(dataFiltered).then(function(res){// Lọc xong theo khoảng thời gian rồi xem co filter theo ten hay lop gi khong\nif(inputSearchValue!==\"null\"){locTheoInputKiemTra(dataFiltered,inputSearchType,inputSearchValue).then(function(res){// mergeDuLieu(res);\ndispatchLocal({type:CONSTANTS.SET_DATA,payload:res});});}});}catch(error){console.log(error);}case 1:case\"end\":return _context.stop();}}},_callee);}));return function handleFilterData(){return _ref2.apply(this,arguments);};}();// const handleGetAllTime = () => {\n//   searchParams.set(\"theo_month\", \"null\");\n//   searchParams.set(\"theo_day\", \"null\");\n//   setSearchParams(searchParams);\n//   handleFilterData();\n// };\nvar handleResetFilter=function handleResetFilter(){searchParams.set(\"theo_month\",\"null\");searchParams.set(\"theo_day\",\"null\");searchParams.set(\"value_search\",\"\");searchParams.set(\"diemTu\",\"-1\");searchParams.set(\"diemDen\",\"-1\");searchParams.set(\"nx\",0);searchParams.set(\"loai_gv\",0);searchParams.set(\"cb\",0);searchParams.set(\"mtkcl\",0);searchParams.set(\"tgm\",\"Tatca\");searchParams.set(\"dscnkt\",\"[]\");searchParams.set(\"tfbvl\",1);setSearchParams(searchParams);handleFilterData();};//hanlde search class\nvar handleSearch=function handleSearch(value,name){switch(name){case\"bh\":{searchParams.set(name,JSON.stringify(value));break;}case\"theo_day\":{searchParams.set(name,JSON.stringify(value));searchParams.set(\"theo_month\",\"null\");break;}case\"theo_month\":{searchParams.set(name,value);searchParams.set(\"theo_day\",\"null\");break;}case\"cb\":case\"gbm\":case\"tfbvl\":case\"nx\":{searchParams.set(name,value?1:0);break;}case\"mtkcl\":{searchParams.set(name,value?1:0);// neu bat khong co lop len thi check chua cham bai va group by mentor de tat di\nif(value){if(isChuaChamBai)searchParams.set(\"cb\",0);if(isGroupByMentor)searchParams.set(\"gbm\",0);}break;}default:{searchParams.set(name,value);break;}}setSearchParams(searchParams);};function tinhSoBaiTapHetHanChuaCham(record){var MentorId=record.MentorId,MaLop=record.MaLop;if(danhSachMentorChuaChamBai){var isCoTenTrongDanhSach=danhSachMentorChuaChamBai.hasOwnProperty(MentorId);var isLopChuaCham=false;if(isCoTenTrongDanhSach){isLopChuaCham=danhSachMentorChuaChamBai[MentorId].danhSachCacLopQuaHanCham.hasOwnProperty(MaLop);}if(isCoTenTrongDanhSach&&isLopChuaCham){return Object.keys(danhSachMentorChuaChamBai[MentorId].danhSachCacLopQuaHanCham).length;}}return 0;}function tinhTongDiemTrungBinhDanhGia(record){var DanhSachDanhGia=JSON.parse(record===null||record===void 0?void 0:record.DanhSachDanhGia);var lengthDanhSachDanhGia=danhMucDanhGia===null||danhMucDanhGia===void 0?void 0:danhMucDanhGia.length;var mangData=[];//hoc vien 40%\n//mentor giang vien 30%\nfor(var i=0;i<lengthDanhSachDanhGia;i++){var item=DanhSachDanhGia[i];var diem=0;var mangNoiDungDanhGia=[];if(item!==null&&item!==void 0&&item.NoiDungDanhGia){mangNoiDungDanhGia=JSON.parse(item===null||item===void 0?void 0:item.NoiDungDanhGia);}var mangDiem=[];var _lengthDanhSachDanhGia=mangNoiDungDanhGia.length;if(_lengthDanhSachDanhGia>0){for(var j=0;j<mangNoiDungDanhGia.length;j++){var _mangNoiDungDanhGia$j;mangDiem.push((_mangNoiDungDanhGia$j=mangNoiDungDanhGia[j])===null||_mangNoiDungDanhGia$j===void 0?void 0:_mangNoiDungDanhGia$j.DiemDanhGia);}}if(mangDiem.length>0){diem=_.mean(mangDiem);}if((item===null||item===void 0?void 0:item.LoaiDanhGia)===\"HOCVIEN\"){diem*=0.4;}else{diem*=0.3;}mangData.push(diem);}return _.mean(mangData).toFixed(3);}function tinhSoLopDangMentor(record){var soLopMentor=0;var soLuongRecord=danhSachDanhGiaCrmTheoThang.length;for(var i=0;i<soLuongRecord;i++){if(danhSachDanhGiaCrmTheoThang[i].MentorId===record.MentorId){soLopMentor++;}}return soLopMentor;}function tinhTongDanhGiaGiangVien(record){var DanhSachDanhGia=JSON.parse(record===null||record===void 0?void 0:record.DanhSachDanhGia);var lengthDanhSachDanhGia=danhMucDanhGia===null||danhMucDanhGia===void 0?void 0:danhMucDanhGia.length;var mangData=[];//hoc vien 40%\n//mentor giang vien 30%\nfor(var i=0;i<lengthDanhSachDanhGia;i++){var item=DanhSachDanhGia[i];if((item===null||item===void 0?void 0:item.LoaiDanhGia)===\"HOCVIEN\"||(item===null||item===void 0?void 0:item.LoaiDanhGia)===\"MENTOR\"){continue;}var diem=0;var mangNoiDungDanhGia=[];if(item!==null&&item!==void 0&&item.NoiDungDanhGia){mangNoiDungDanhGia=JSON.parse(item===null||item===void 0?void 0:item.NoiDungDanhGia);}var mangDiem=[];var _lengthDanhSachDanhGia2=mangNoiDungDanhGia.length;if(_lengthDanhSachDanhGia2>0){for(var j=0;j<mangNoiDungDanhGia.length;j++){var _mangNoiDungDanhGia$j2;mangDiem.push((_mangNoiDungDanhGia$j2=mangNoiDungDanhGia[j])===null||_mangNoiDungDanhGia$j2===void 0?void 0:_mangNoiDungDanhGia$j2.DiemDanhGia);}}if(mangDiem.length>0){diem=_.mean(mangDiem);}mangData.push(diem);}if(mangData.length===0)return 0;return _.mean(mangData).toFixed(3);}function tinhTongDanhGiaHocVien(record){var DanhSachDanhGia=JSON.parse(record===null||record===void 0?void 0:record.DanhSachDanhGia);var lengthDanhSachDanhGia=danhMucDanhGia===null||danhMucDanhGia===void 0?void 0:danhMucDanhGia.length;var mangData=[];//hoc vien 40%\n//mentor giang vien 30%\nfor(var i=0;i<lengthDanhSachDanhGia;i++){var item=DanhSachDanhGia[i];if((item===null||item===void 0?void 0:item.LoaiDanhGia)!==\"HOCVIEN\"){continue;}var diem=0;var mangNoiDungDanhGia=[];if(item!==null&&item!==void 0&&item.NoiDungDanhGia){mangNoiDungDanhGia=JSON.parse(item===null||item===void 0?void 0:item.NoiDungDanhGia);}var mangDiem=[];var _lengthDanhSachDanhGia3=mangNoiDungDanhGia.length;if(_lengthDanhSachDanhGia3>0){for(var j=0;j<mangNoiDungDanhGia.length;j++){var _mangNoiDungDanhGia$j3;mangDiem.push((_mangNoiDungDanhGia$j3=mangNoiDungDanhGia[j])===null||_mangNoiDungDanhGia$j3===void 0?void 0:_mangNoiDungDanhGia$j3.DiemDanhGia);}}if(mangDiem.length>0){diem=_.mean(mangDiem);}mangData.push(diem);}return _.mean(mangData).toFixed(3);}function tinhSoLuongDanhGia(record){var DanhSachDanhGia=JSON.parse(record===null||record===void 0?void 0:record.DanhSachDanhGia);// console.log(record)\nvar lengthDanhSachDanhGia=DanhSachDanhGia===null||DanhSachDanhGia===void 0?void 0:DanhSachDanhGia.length;var soLuongDanhGia=0;//hoc vien 40%\n//mentor giang vien 30%\nfor(var i=0;i<lengthDanhSachDanhGia;i++){var item=DanhSachDanhGia[i];if(item!==null&&item!==void 0&&item.NoiDungDanhGia){soLuongDanhGia++;}}return[soLuongDanhGia,lengthDanhSachDanhGia];}function tinhTongDanhGiaMentor(record){var DanhSachDanhGia=JSON.parse(record===null||record===void 0?void 0:record.DanhSachDanhGia);var lengthDanhSachDanhGia=danhMucDanhGia===null||danhMucDanhGia===void 0?void 0:danhMucDanhGia.length;var mangData=[];//hoc vien 40%\n//mentor giang vien 30%\nfor(var i=0;i<lengthDanhSachDanhGia;i++){var item=DanhSachDanhGia[i];if((item===null||item===void 0?void 0:item.LoaiDanhGia)!==\"MENTOR\"){continue;}var diem=0;var mangNoiDungDanhGia=[];if(item!==null&&item!==void 0&&item.NoiDungDanhGia){mangNoiDungDanhGia=JSON.parse(item===null||item===void 0?void 0:item.NoiDungDanhGia);}var mangDiem=[];var _lengthDanhSachDanhGia4=mangNoiDungDanhGia.length;if(_lengthDanhSachDanhGia4>0){for(var j=0;j<mangNoiDungDanhGia.length;j++){var _mangNoiDungDanhGia$j4;mangDiem.push((_mangNoiDungDanhGia$j4=mangNoiDungDanhGia[j])===null||_mangNoiDungDanhGia$j4===void 0?void 0:_mangNoiDungDanhGia$j4.DiemDanhGia);}}if(mangDiem.length>0){diem=_.mean(mangDiem);}mangData.push(diem);}if(mangData.length===0)return 0;return _.mean(mangData).toFixed(3);}function taoThongTinTenLopHoc(maLop,LICH_HOC){var _dsChiNhanh$find,_JSON$parse;var _danhSachLopObject$ma=danhSachLopObject[maLop],tenLopHoc=_danhSachLopObject$ma.tenLopHoc,ngayKetThuc=_danhSachLopObject$ma.ngayKetThuc,thoiKhoaBieu=_danhSachLopObject$ma.thoiKhoaBieu,chiNhanh=_danhSachLopObject$ma.chiNhanh;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{children:tenLopHoc}),/*#__PURE__*/_jsxs(Tag,{color:\"red\",children:[(_dsChiNhanh$find=dsChiNhanh.find(function(chiNhanhMau){return chiNhanhMau.id===chiNhanh;}))===null||_dsChiNhanh$find===void 0?void 0:_dsChiNhanh$find.tenChiNhanh,\" \"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Ng\\xE0y k\\u1EBFt th\\xFAc: \"}),\" \",moment(ngayKetThuc).format(\"DD/MM/yyyy\")]}),/*#__PURE__*/_jsx(\"p\",{children:(_JSON$parse=JSON.parse(thoiKhoaBieu))===null||_JSON$parse===void 0?void 0:_JSON$parse.map(function(ngayHoc,index){var _LICH_HOC$find;return/*#__PURE__*/_jsxs(Tag,{color:\"blue\",children:[\" \",(_LICH_HOC$find=LICH_HOC.find(function(item){return item.value===ngayHoc;}))===null||_LICH_HOC$find===void 0?void 0:_LICH_HOC$find.label,\" \"]},\"TagLichHoc_\".concat(index));})})]});}function locDanhSachCacLopDangMentor(dsMaLop){var result=[];var _loop3=function _loop3(i){var _dsChiNhanh$find2;var maLop=dsMaLop[i];var lopHoc=danhSachLopObject[maLop];result.push(/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Tag,{color:\"red\",children:\"\".concat(lopHoc.tenLopHoc,\" - \").concat((_dsChiNhanh$find2=dsChiNhanh.find(function(chiNhanh){return chiNhanh.id===lopHoc.chiNhanh;}))===null||_dsChiNhanh$find2===void 0?void 0:_dsChiNhanh$find2.tenChiNhanh)})}));};for(var i=0;i<dsMaLop.length;i++){_loop3(i);}return result;}function locDanhSachCacBuoiDangMentor(dsMaLop){var _listMaBuoiHoc;var result=[];var listMaBuoiHoc=[];for(var i=0;i<dsMaLop.length;i++){var maLop=dsMaLop[i];var lopHoc=danhSachLopObject[maLop];listMaBuoiHoc=listMaBuoiHoc.concat(JSON.parse(lopHoc.thoiKhoaBieu));}result=(_listMaBuoiHoc=listMaBuoiHoc)===null||_listMaBuoiHoc===void 0?void 0:_listMaBuoiHoc.map(function(ngayHoc,index){var _LICH_HOC$find2;return/*#__PURE__*/_jsxs(Tag,{color:\"blue\",children:[\" \",(_LICH_HOC$find2=LICH_HOC.find(function(item){return item.value===ngayHoc;}))===null||_LICH_HOC$find2===void 0?void 0:_LICH_HOC$find2.label,\" \"]},\"TagLichHocGroupByMentor_\".concat(index));});return result;}var colMentorChuaCoLop=[{title:\"Tên mentor\",render:function render(text,record){return record.HoTen;},key:\"hoTen\",dataIndex:\"hoTen\"},{title:\"Email\",render:function render(text,record){return record.Email;},key:\"email\",dataIndex:\"email\"},{title:\"Số điện thoại\",render:function render(text,record){return record.SoDT;},key:\"soDT\",dataIndex:\"soDT\"},{title:\"Thời gian mentor\",render:function render(text,record){var _OPTIONS_THOI_GIAN_ME;// console.log(record)\nreturn/*#__PURE__*/_jsxs(Tag,{color:\"green\",children:[\" \",(_OPTIONS_THOI_GIAN_ME=OPTIONS_THOI_GIAN_MENTOR.find(function(item){return item.value===record.ThoiGianMentor;}))===null||_OPTIONS_THOI_GIAN_ME===void 0?void 0:_OPTIONS_THOI_GIAN_ME.label]});},key:\"thoiGianMentor\",dataIndex:\"thoiGianMentor\"},{title:\"Chi nhánh đăng ký mentor\",render:function render(text,record){var _JSON$parse2;// console.log(record)\n// console.log(dsChiNhanh)\nreturn record.DanhSachChiNhanhMentor&&((_JSON$parse2=JSON.parse(record.DanhSachChiNhanhMentor))===null||_JSON$parse2===void 0?void 0:_JSON$parse2.map(function(item){var _dsChiNhanh$find3;// console.log(item)\nreturn/*#__PURE__*/_jsx(Tag,{color:\"red\",children:(_dsChiNhanh$find3=dsChiNhanh.find(function(chiNhanh){return chiNhanh.id===item;}))===null||_dsChiNhanh$find3===void 0?void 0:_dsChiNhanh$find3.tenChiNhanh});}));},key:\"chiNhanhMentor\",dataIndex:\"chiNhanhMentor\"}];var colMentorCoLopGroupByMentor=[{title:\"Tên mentor\",render:function render(text,record){return record.HoTen;},key:\"hoTen\",dataIndex:\"hoTen\"},{title:\"Email\",render:function render(text,record){return record.Email;},key:\"email\",dataIndex:\"email\"},{title:\"Số điện thoại\",render:function render(text,record){return record.SoDT;},key:\"soDT\",dataIndex:\"soDT\"},{title:\"Lớp đang mentor\",render:function render(text,record){return(record===null||record===void 0?void 0:record.DanhSachMaLop)&&locDanhSachCacLopDangMentor(record===null||record===void 0?void 0:record.DanhSachMaLop);},key:\"cacLopDangMentor\",dataIndex:\"cacLopDangMentor\"},{title:\"Các buổi đang mentor\",render:function render(text,record){return(record===null||record===void 0?void 0:record.DanhSachMaLop)&&locDanhSachCacBuoiDangMentor(record===null||record===void 0?void 0:record.DanhSachMaLop);},key:\"cacBuoiDangMentor\",dataIndex:\"cacBuoiDangMentor\"},{title:\"Số lượng bài quá hạn chưa chấm\",render:function render(text,record){return tinhSoBaiTapHetHanChuaCham(record);},key:\"SoLuongBaiQuaHanChuaCham\",dataIndex:\"SoLuongBaiQuaHanChuaCham\",sorter:function sorter(a,b){return tinhSoBaiTapHetHanChuaCham(a)-tinhSoBaiTapHetHanChuaCham(b);}},{title:\"Điểm học viên\",render:function render(text,record){return tinhTongDanhGiaHocVien(record);},key:\"diemHocVien\",dataIndex:\"diemHocVien\",sorter:function sorter(a,b){return tinhTongDanhGiaHocVien(a)-tinhTongDanhGiaHocVien(b);}},{title:\"Điểm mentor\",render:function render(text,record){return tinhTongDanhGiaMentor(record);},key:\"diemMentor\",dataIndex:\"diemMentor\",sorter:function sorter(a,b){return tinhTongDanhGiaMentor(a)-tinhTongDanhGiaMentor(b);}},{title:\"Điểm giảng viên\",render:function render(text,record){return tinhTongDanhGiaGiangVien(record);},key:\"diemGiangVien\",dataIndex:\"diemGiangVien\",sorter:function sorter(a,b){return tinhTongDanhGiaGiangVien(a)-tinhTongDanhGiaGiangVien(b);}},{title:\"Tổng điểm trung bình đánh giá\",render:function render(text,record){return tinhTongDiemTrungBinhDanhGia(record);},key:\"DiemTrungBinhDanhGia\",dataIndex:\"DiemTrungBinhDanhGia\",sorter:function sorter(a,b){return tinhTongDiemTrungBinhDanhGia(a)-tinhTongDiemTrungBinhDanhGia(b);}},{title:\"Số lượng đánh giá\",render:function render(text,record){var soLuongDanhGia=tinhSoLuongDanhGia(record);return\"\".concat(soLuongDanhGia[0],\"/\").concat(soLuongDanhGia[1]);// return soLuongDanhGia\n},key:\"SoLuongDanhGia\",dataIndex:\"SoLuongDanhGia\",sorter:function sorter(a,b){return tinhSoLuongDanhGia(a)[0]-tinhSoLuongDanhGia(b)[0];}},{title:\"Số lớp đang mentor \",render:function render(text,record){return record.SoLopDangMentor;},key:\"SoLopDangMentor\",dataIndex:\"SoLopDangMentor\",sorter:function sorter(a,b){return a.SoLopDangMentor-b.SoLopDangMentor;}},{title:\"Action\",render:function render(text,record){return/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success\",onClick:function onClick(){return dispatchLocal({type:CONSTANTS.SET_RECORD_XEM_CHI_TIET_DANH_GIA,payload:record});},children:\"Xem \\u0111\\xE1nh gi\\xE1\"});},key:\"Action\",dataIndex:\"Action\"}];var colMentorCoLop=[{title:\"Tên mentor\",render:function render(text,record){return record.HoTen;},key:\"hoTen\",dataIndex:\"hoTen\"},{title:\"Email\",render:function render(text,record){return record.Email;},key:\"email\",dataIndex:\"email\"},{title:\"Số điện thoại\",render:function render(text,record){return record.SoDT;},key:\"soDT\",dataIndex:\"soDT\"},{title:\"Tên lớp\",render:function render(text,record){return(record===null||record===void 0?void 0:record.MaLop)&&taoThongTinTenLopHoc(record===null||record===void 0?void 0:record.MaLop,LICH_HOC);},key:\"tenLopHoc\",dataIndex:\"tenLopHoc\"},{title:\"Số lượng bài quá hạn chưa chấm\",render:function render(text,record){return tinhSoBaiTapHetHanChuaCham(record);},key:\"SoLuongBaiQuaHanChuaCham\",dataIndex:\"SoLuongBaiQuaHanChuaCham\",sorter:function sorter(a,b){return tinhSoBaiTapHetHanChuaCham(a)-tinhSoBaiTapHetHanChuaCham(b);}},{title:\"Điểm học viên\",render:function render(text,record){return tinhTongDanhGiaHocVien(record);},key:\"diemHocVien\",dataIndex:\"diemHocVien\",sorter:function sorter(a,b){return tinhTongDanhGiaHocVien(a)-tinhTongDanhGiaHocVien(b);}},{title:\"Điểm mentor\",render:function render(text,record){return tinhTongDanhGiaMentor(record);},key:\"diemMentor\",dataIndex:\"diemMentor\",sorter:function sorter(a,b){return tinhTongDanhGiaMentor(a)-tinhTongDanhGiaMentor(b);}},{title:\"Điểm giảng viên\",render:function render(text,record){return tinhTongDanhGiaGiangVien(record);},key:\"diemGiangVien\",dataIndex:\"diemGiangVien\",sorter:function sorter(a,b){return tinhTongDanhGiaGiangVien(a)-tinhTongDanhGiaGiangVien(b);}},{title:\"Tổng điểm trung bình đánh giá\",render:function render(text,record){return tinhTongDiemTrungBinhDanhGia(record);},key:\"DiemTrungBinhDanhGia\",dataIndex:\"DiemTrungBinhDanhGia\",sorter:function sorter(a,b){return tinhTongDiemTrungBinhDanhGia(a)-tinhTongDiemTrungBinhDanhGia(b);}},{title:\"Số lượng đánh giá\",render:function render(text,record){var soLuongDanhGia=tinhSoLuongDanhGia(record);return\"\".concat(soLuongDanhGia[0],\"/\").concat(soLuongDanhGia[1]);// return soLuongDanhGia\n},key:\"SoLuongDanhGia\",dataIndex:\"SoLuongDanhGia\",sorter:function sorter(a,b){return tinhSoLuongDanhGia(a)[0]-tinhSoLuongDanhGia(b)[0];}},{title:\"Số lớp đang mentor \",render:function render(text,record){return tinhSoLopDangMentor(record);},key:\"SoLopDangMentor\",dataIndex:\"SoLopDangMentor\",sorter:function sorter(a,b){return tinhSoLopDangMentor(a)-tinhSoLopDangMentor(b);}},{title:\"Action\",render:function render(text,record){return/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success\",onClick:function onClick(){return dispatchLocal({type:CONSTANTS.SET_RECORD_XEM_CHI_TIET_DANH_GIA,payload:record});},children:\"Xem \\u0111\\xE1nh gi\\xE1\"});},key:\"Action\",dataIndex:\"Action\"}];function handleGetDanhGiaMentorTheoThang(date){}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Spin,{tip:\"Loading....\",spinning:isLoading,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row mt-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsxs(Input.Group,{compact:true,children:[/*#__PURE__*/_jsxs(Select,{defaultValue:inputSearchType,style:{width:\"40%\"},onSelect:function onSelect(value){return handleSearch(value,\"type_search\");},children:[/*#__PURE__*/_jsx(Option,{value:\"tenLop\",children:\"L\\u1EDBp\"}),/*#__PURE__*/_jsx(Option,{value:\"hoTen\",children:\"H\\u1ECD t\\xEAn\"}),/*#__PURE__*/_jsx(Option,{value:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(Option,{value:\"soDienThoai\",children:\"SDT\"})]}),/*#__PURE__*/_jsx(Search,{className:\"input-search\",onChange:function onChange(e){handleSearch(e.target.value,\"value_search\");},onSearch:function onSearch(value){return handleFilterData();},style:{width:\"59%\"}})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsxs(Input.Group,{compact:true,children:[/*#__PURE__*/_jsx(Radio.Button,{children:\"Theo th\\xE1ng\"}),/*#__PURE__*/_jsx(MonthPicker,{format:\"MM/YYYY\",value:theoThang==\"null\"?moment().subtract(1,\"months\"):moment(theoThang),onChange:function onChange(date,dateS){// set lại url\nhandleSearch(date,\"theo_month\");dispatch(callApiDanhSachDanhGiaCrmTheoThang(date));}})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsxs(Input.Group,{compact:true,children:[/*#__PURE__*/_jsxs(\"span\",{className:\"mr-2\",style:{lineHeight:\"30px\"},children:[\"Th\\u1EDDi gian mentor:\",\" \"]}),/*#__PURE__*/_jsx(Select,{value:thoiGianMentor,style:{width:100},onSelect:function onSelect(value){return handleSearch(value,\"tgm\");},options:OPTIONS_THOI_GIAN_MENTOR,disabled:isTatFilterThoiGianVaLopMentor})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-2\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"T\\u1EAFt filter bu\\u1ED5i v\\xE0 chi nh\\xE1nh mentor:\"}),\" \",/*#__PURE__*/_jsx(Switch,{checked:isTatFilterThoiGianVaLopMentor,onChange:function onChange(value){handleSearch(value,\"tfbvl\");}})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row mt-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-12\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-left d-block mb-2\",children:[\"Danh s\\xE1ch chi nh\\xE1nh check:\",\" \"]}),/*#__PURE__*/_jsx(Select,{disabled:isTatFilterThoiGianVaLopMentor,mode:\"tags\",style:{width:\"100%\"},allowClear:true,placeholder:\"Ch\\u1ECDn chi nh\\xE1nh c\\u1EA7n ki\\u1EC3m tra\",value:dsChiNhanhKiemTra,onChange:function onChange(value){return handleSearch(JSON.stringify(value),\"dscnkt\");},options:dsChiNhanh.map(function(item){// console.log(item)\nreturn{value:item===null||item===void 0?void 0:item.id,label:item===null||item===void 0?void 0:item.tenChiNhanh};})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mt-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsx(Input.Group,{compact:true,children:/*#__PURE__*/_jsxs(Select,{defaultValue:loaiNguoiDung,style:{width:100},onSelect:function onSelect(value){return handleSearch(value,\"loai_gv\");},children:[/*#__PURE__*/_jsx(Option,{value:0,children:\"T\\u1EA5t c\\u1EA3\"}),/*#__PURE__*/_jsx(Option,{value:1,children:\"Gi\\u1EA3ng vi\\xEAn\"}),/*#__PURE__*/_jsx(Option,{value:2,children:\"Mentor\"})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-2\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Ch\\u01B0a ch\\u1EA5m b\\xE0i:\"}),\" \",/*#__PURE__*/_jsx(Switch,{checked:isChuaChamBai,onChange:function onChange(value){return handleSearch(value,\"cb\");},disabled:isChuaCoLopMentor})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-2\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Kh\\xF4ng c\\xF3 l\\u1EDBp:\"}),\" \",/*#__PURE__*/_jsx(Switch,{checked:isChuaCoLopMentor,onChange:function onChange(value){handleSearch(value,\"mtkcl\");}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-2\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Group Mentor:\"}),\" \",/*#__PURE__*/_jsx(Switch,{disabled:isChuaCoLopMentor,checked:isGroupByMentor,onChange:function onChange(value){handleSearch(value,\"gbm\");}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsx(Input.Group,{compact:true,children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:handleFilterData,children:\"L\\u1ECDc d\\u1EEF li\\u1EC7u\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsx(Input.Group,{compact:true,children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:handleResetFilter,children:\"Clear Filter\"})})})]})]}),/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Table,{bordered:true,dataSource:state.data,columns:kiemTraTrangThaiTable(isGroupByMentor,isChuaCoLopMentor)// columns={isChuaCoLopMentor ? colMentorChuaCoLop : colMentorCoLop}\n// pagination={{\n//   defaultPageSize: 10,\n//   pageSizeOptions: [\"10\", \"15\", \"20\", \"30\", \"50\"],\n//   showSizeChanger: true,\n// }}\n,pagination:false,className:\"pr-3 table-striped\"}),/*#__PURE__*/_jsx(Modal,{open:state.isModalChiTietDanhGiaVisible,title:\"Chi ti\\u1EBFt \\u0111\\xE1nh gi\\xE1 mentor\",onCancel:function onCancel(){return dispatchLocal({type:CONSTANTS.SET_MODAL_CHI_TIET_DANH_GIA_VISIBLE,payload:false});},footer:null,width:\"90vw\",height:\"90vh\",style:{top:10},children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(ChiTietDanhGiaMentorComponent,{record:state.recordDangChon,danhMucDanhGia:danhMucDanhGia})})})]})]})});}function ChiTietDanhGiaMentorComponent(props){var record=props.record,danhMucDanhGia=props.danhMucDanhGia;var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isHiddenName=_useState2[0],setIsHiddenName=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),dataTable=_useState4[0],setDataTable=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),danhSachNhacNho=_useState6[0],setDanhSachNhacNho=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isVisibleModalXemNhacNho=_useState8[0],setIsVisibleModalXemNhacNho=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isVisibleThemNhacNhoModal=_useState10[0],setIsVisibleThemNhacNhoModal=_useState10[1];var _useState11=useState({}),_useState12=_slicedToArray(_useState11,2),modelNhacNho=_useState12[0],setModelNhacNho=_useState12[1];var dsNguoiDung=useSelector(function(state){return state.userReducer.dsNguoiDung;});var danhSachLop=useSelector(function(state){return state.lopHocReducer.danhSachLop;});var danhSachDanhGia=JSON.parse(record===null||record===void 0?void 0:record.DanhSachDanhGia);var lengthDanhSachDanhGia=danhSachDanhGia.length;var lengthDanhMucDanhGia=danhMucDanhGia.length;// UseEffect\nuseEffect(function(){var isMount=true;if(isMount&&record.DanhSachNhacNho!==null){setDanhSachNhacNho(JSON.parse(record.DanhSachNhacNho));}else{setDanhSachNhacNho([]);}return function(){isMount=false;};},[record.MentorId]);useEffect(function(){var isMount=true;if(isMount){var mangData=[];for(var i=0;i<lengthDanhSachDanhGia;i++){var item=danhSachDanhGia[i];item.isDanhGia=false;var mangNoiDungDanhGia=[];if(item!==null&&item!==void 0&&item.NoiDungDanhGia){mangNoiDungDanhGia=JSON.parse(item===null||item===void 0?void 0:item.NoiDungDanhGia);item.isDanhGia=true;}for(var j=0;j<lengthDanhMucDanhGia;j++){var tenKey=danhMucDanhGia[j];item[removeVietnameseTones(tenKey.replaceAll(\" \",\"\"))]=item!==null&&item!==void 0&&item.isDanhGia?mangNoiDungDanhGia[j]:\"\";}mangData.push(item);}setDataTable(mangData);}return function(){isMount=false;};},[record.MentorId,record.MaLop]);var handleLuuThongTin=function handleLuuThongTin(){// console.log(record)\nvar model={MaLop:record.MaLop,MaNguoiNhacNho:record.MentorId,NoiDungNhacNho:modelNhacNho.noiDungNhacNho};AdminService.themNhacNhoMentorService(model).then(function(res){// Set lai model\nmessage.info(\"Them thanh cong\");// Loi do reducer update nhung khong update lai table nen trick o day la push vao cai mang data hien tai\nvar newModelNhacNho=_objectSpread(_objectSpread({},model),{},{Id:danhSachNhacNho.length+1,DaXoa:false,DateTime:new Date(),UpdateAt:new Date(),LyDoXoa:\"\",MaNguoiXoa:\"\"});var newDanhSachNhacNho=[].concat(_toConsumableArray(danhSachNhacNho),[newModelNhacNho]);setDanhSachNhacNho(newDanhSachNhacNho);setModelNhacNho({});setIsVisibleThemNhacNhoModal(false);dispatch(updateNhacNhoMentor(model));});};var columnNhacNho=[{title:\"Tên người nhắc nhở\",render:function render(text,record){var _dsNguoiDung$find;console.log(dsNguoiDung,record);return dsNguoiDung===null||dsNguoiDung===void 0?void 0:(_dsNguoiDung$find=dsNguoiDung.find(function(x){return x.id===record.MaNguoiNhacNho;}))===null||_dsNguoiDung$find===void 0?void 0:_dsNguoiDung$find.hoTen;},key:\"TenNguoiNhacNho\",dataIndex:\"TenNguoiNhacNho\"},{title:\"Lớp học\",render:function render(text,record){var _danhSachLop$find;return danhSachLop===null||danhSachLop===void 0?void 0:(_danhSachLop$find=danhSachLop.find(function(x){return x.id===record.MaLop;}))===null||_danhSachLop$find===void 0?void 0:_danhSachLop$find.tenLopHoc;},key:\"NgayNhacNho\",dataIndex:\"NgayNhacNho\"},,{title:\"Ngày nhắc nhở\",render:function render(text,record){return moment(record.NgayTao).format(\"DD/MM/yyyy\");},key:\"NgayNhacNho\",dataIndex:\"NgayNhacNho\"},{title:\"Nội dung nhắc nhở\",render:function render(text,record){return record.NoiDungNhacNho;},key:\"NoiDungNhacNho\",dataIndex:\"NoiDungNhacNho\"}];var colXemDanhGia=[{title:\"Tên người dánh giá\",render:function render(text,record){return isHiddenName?\"\":record.TenNguoiDanhGia;},key:\"TenNguoiDanhGia\",dataIndex:\"TenNguoiDanhGia\"},{title:\"Loại đánh giá\",render:function render(text,record){return record.LoaiDanhGia;},key:\"LoaiDanhGia\",dataIndex:\"LoaiDanhGia\",sorter:function sorter(a,b){return a.LoaiDanhGia.length-b.LoaiDanhGia.length;}},{title:\"Hỗ trợ trên lớp học\",render:function render(text,record){return/*#__PURE__*/_jsx(NhanXetHocVienComponent,{NhanXetHocVien:record.Hotrotrenlophoc});},key:\"Hotrotrenlophoc\",dataIndex:\"Hotrotrenlophoc\"},{title:\"Ngôn từ giao tiếp\",render:function render(text,record){return/*#__PURE__*/_jsx(NhanXetHocVienComponent,{NhanXetHocVien:record.Ngontugiaotiep});},key:\"Ngontugiaotiep\",dataIndex:\"Ngontugiaotiep\"},{title:\"Hỗ trợ ngoài giờ\",render:function render(text,record){return/*#__PURE__*/_jsx(NhanXetHocVienComponent,{NhanXetHocVien:record.Hotrongoaigio});},key:\"Hotrongoaigio\",dataIndex:\"Hotrongoaigio\"},{title:\"Nhiệt tình\",render:function render(text,record){return/*#__PURE__*/_jsx(NhanXetHocVienComponent,{NhanXetHocVien:record.Nhiettinh});},key:\"Nhiettinh\",dataIndex:\"Nhiettinh\"},{title:\"Chia sẻ kiến thức\",render:function render(text,record){return/*#__PURE__*/_jsx(NhanXetHocVienComponent,{NhanXetHocVien:record.Chiasekienthuc});},key:\"Chiasekienthuc\",dataIndex:\"Chiasekienthuc\"},{title:\"Thái độ hỗ trợ\",render:function render(text,record){return/*#__PURE__*/_jsx(NhanXetHocVienComponent,{NhanXetHocVien:record.Thaidohotro});},key:\"Thaidohotro\",dataIndex:\"Thaidohotro\"},,{title:\"Đánh giá\",render:function render(text,record){return record!==null&&record!==void 0&&record.isDanhGia?/*#__PURE__*/_jsx(\"p\",{children:\"X\"}):null;},key:\"Thaidohotro\",dataIndex:\"Thaidohotro\",sorter:function sorter(a,b){return a.isDanhGia-b.isDanhGia;}}];var handleChangeInput=function handleChangeInput(e){var newModelNhacNho=_objectSpread({},modelNhacNho);newModelNhacNho[e.target.name]=e.target.value;setModelNhacNho(newModelNhacNho);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between\",children:[/*#__PURE__*/_jsxs(\"h5\",{children:[record.TenLopHoc,\" - \",record.HoTen]}),/*#__PURE__*/_jsx(Badge,{count:record!==null&&record!==void 0&&record.DanhSachNhacNho?danhSachNhacNho.length:0,children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:function onClick(){return setIsVisibleModalXemNhacNho(true);},children:\"Xem ghi ch\\xFA\"})})]}),/*#__PURE__*/_jsxs(\"h6\",{children:[\"C\\xF3 \",dataTable===null||dataTable===void 0?void 0:dataTable.filter(function(x){return x.isDanhGia;}).length,\" / \",dataTable.length,\" \",\"l\\u01B0\\u1EE3t \\u0111\\xE1nh gi\\xE1\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-2\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"\\u1EA8n t\\xEAn ng\\u01B0\\u1EDDi \\u0111\\xE1nh gi\\xE1:\"}),\" \",/*#__PURE__*/_jsx(Switch,{checked:isHiddenName,onChange:function onChange(value){setIsHiddenName(value);}})]})]}),/*#__PURE__*/_jsx(Table,{bordered:true,dataSource:dataTable,columns:colXemDanhGia// pagination={{\n//   defaultPageSize: 10,\n//   pageSizeOptions: [\"10\", \"15\", \"20\", \"30\", \"50\"],\n//   showSizeChanger: true,\n// }}\n,pagination:false,className:\"pr-3 table-striped\"}),/*#__PURE__*/_jsxs(Modal,{open:isVisibleModalXemNhacNho,title:\"Danh s\\xE1ch \\u0111\\xE3 nh\\u1EAFc nh\\u1EDF\",onCancel:function onCancel(){return setIsVisibleModalXemNhacNho(false);},footer:null,width:\"90vw\",height:\"90vh\",style:{top:10},children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-right mb-2\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success \",onClick:function onClick(){return setIsVisibleThemNhacNhoModal(true);},children:\"Th\\xEAm nh\\u1EAFc nh\\u1EDF\"})}),/*#__PURE__*/_jsx(Table,{bordered:true,dataSource:danhSachNhacNho,columns:columnNhacNho// pagination={{\n//   defaultPageSize: 10,\n//   pageSizeOptions: [\"10\", \"15\", \"20\", \"30\", \"50\"],\n//   showSizeChanger: true,\n// }}\n,pagination:false,className:\"pr-3 table-striped\"}),/*#__PURE__*/_jsx(Modal,{open:isVisibleThemNhacNhoModal,title:\"Them Nhac Nho\",onCancel:function onCancel(){return setIsVisibleThemNhacNhoModal(false);},footer:null,width:\"50vw\",height:\"50vh\",style:{top:10},children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",id:\"editProjectForm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"font-bold\",children:\"N\\u1ED9i dung nh\\u1EAFc nh\\u1EDF: \"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",name:\"noiDungNhacNho\",rows:6,value:modelNhacNho!==null&&modelNhacNho!==void 0&&modelNhacNho.noiDungNhacNho?modelNhacNho.noiDungNhacNho:\"\",onChange:function onChange(e){return handleChangeInput(e);},placeholder:\"B\\u1EA1n h\\xE3y nh\\u1EADp n\\u1ED9i dung \\u0111\\xE3 nh\\u1EAFc nh\\u1EDF mentor\"})]}),/*#__PURE__*/_jsx(Popconfirm,{title:\"B\\u1EA1n c\\xF3 ch\\u1EAFc mu\\u1ED1n th\\xEAm nh\\u1EAFc nh\\u1EDF\",onConfirm:function onConfirm(){return handleLuuThongTin();},children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",children:\"Th\\xEAm nh\\u1EAFc nh\\u1EDF\"})})]})})})})]})]});}function NhanXetHocVienComponent(props){var _props$NhanXetHocVien=props===null||props===void 0?void 0:props.NhanXetHocVien,DiemDanhGia=_props$NhanXetHocVien.DiemDanhGia,NhanXet=_props$NhanXetHocVien.NhanXet;// }\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[DiemDanhGia?/*#__PURE__*/_jsxs(\"h6\",{children:[\"\\u0110i\\u1EC3m: \",DiemDanhGia]}):null,NhanXet&&(NhanXet===null||NhanXet===void 0?void 0:NhanXet.trim())!==\"\"?/*#__PURE__*/_jsxs(\"h6\",{children:[\"Nh\\u1EADn x\\xE9t : \",NhanXet]}):null]});}","map":{"version":3,"names":["React","useEffect","useState","useMemo","useReducer","DatePicker","Tag","Select","Checkbox","Table","Input","InputNumber","Button","Modal","message","Radio","Spin","Tooltip","Rate","Badge","Switch","Popconfirm","useSearchParams","moment","useSelector","useDispatch","BulbFilled","removeVietnameseTones","_","callApiDanhSachDanhGiaCrmTheoThang","updateNhacNhoMentor","AdminService","ClassStatusSwitch","Option","Search","MonthPicker","RangePicker","WeekPicker","initialState","isLoading","data","isModalChiTietDanhGiaVisible","recordDangChon","CONSTANTS","SET_IS_LOADING","SET_DATA","SET_MODAL_CHI_TIET_DANH_GIA_VISIBLE","SET_RECORD_XEM_CHI_TIET_DANH_GIA","asyncThing","value","Promise","resolve","setTimeout","DanhGiaMentorV3","dispatch","thangTruoc","Date","setDate","setMonth","getMonth","type_search","value_search","theo_day","theo_month","nx","tieuChi","diemTu","diemDen","loai_gv","cb","tgm","dscnkt","mtkcl","gbm","tfbvl","searchParams","setSearchParams","rangeValue","get","JSON","parse","inputSearchType","theoThang","inputSearchValue","Number","isCoNhanXet","loaiNguoiDung","isChuaChamBai","thoiGianMentor","dsChiNhanhKiemTra","isChuaCoLopMentor","isGroupByMentor","isTatFilterThoiGianVaLopMentor","reducer","state","type","payload","dispatchLocal","dsNguoiDungObject","userReducer","danhSachLopObject","lopHocReducer","dsConfig","adminReducer","LICH_HOC","find","item","id","noiDung","danhMucDanhGia","danhGiaMentorReducer","dsChiNhanh","dsMentorChiNhanh","quanLyMentorReducer","danhSachMentorChiNhanh","danhSachDanhGiaCrmTheoThang","groupDanhSachDanhGiaCrmTheoThangByMentor","length","danhSachDanhGiaCrmTheoThangGroupByMentor","danhSachMentorIdCoLop","danhSachMentorChuaChamBai","OPTIONS_THOI_GIAN_MENTOR","label","isMount","handleFilterData","danhSachDanhGiaMentorCrmTheoThang","dataGroup","groupIdMentor","lengthDanhSachDanhGia","i","record","includes","MentorId","newArrayMaLop","MaLop","push","DanhSachMaLop","SoLopDangMentor","recordDaLuu","dataDanhGiaDaLuu","DanhSachDanhGia","dataDanhGiaChuaLuu","danhSachMerge","concat","stringify","tinhDiemDuaTheoTieuChi","dataDiem","tieuChiArray","count","tongDiem","map","ChiTietDanhGia","index","DiemDanhGia","kiemTraTrangThaiTable","colMentorChuaCoLop","colMentorCoLopGroupByMentor","colMentorCoLop","locTheoLoaiNguoiDung","loaiNguoiDungCanCheck","all","arrTemp","filter","MaNhomQuyen","locChuaChamBai","isCoTenTrongDanhSach","hasOwnProperty","isLopChuaCham","danhSachCacLopQuaHanCham","checkString","dataCheck","inputValue","toString","toLowerCase","locTheoInputKiemTra","TenLopHoc","HoTen","Email","SoDT","locDanhSachMentorDangCoLopCoTheMentor","dataFiltered","lsMentorCoTheMentor","locCacMentorCoTheMentorTheoChiNhanhVaThoiGian","dsChiNhanhCoTheMentor","danhSachChiNhanhMentor","j","locDanhSachMentorChuaCoLopCoTheMentor","lsMentorDaCoLop","lopHoc","mentorId","hoTen","email","soDT","DanhSachNhacNho","ThoiGianMentor","DanhSachChiNhanhMentor","then","res","error","console","log","handleResetFilter","set","handleSearch","name","tinhSoBaiTapHetHanChuaCham","Object","keys","tinhTongDiemTrungBinhDanhGia","mangData","diem","mangNoiDungDanhGia","NoiDungDanhGia","mangDiem","mean","LoaiDanhGia","toFixed","tinhSoLopDangMentor","soLopMentor","soLuongRecord","tinhTongDanhGiaGiangVien","tinhTongDanhGiaHocVien","tinhSoLuongDanhGia","soLuongDanhGia","tinhTongDanhGiaMentor","taoThongTinTenLopHoc","maLop","tenLopHoc","ngayKetThuc","thoiKhoaBieu","chiNhanh","chiNhanhMau","tenChiNhanh","format","ngayHoc","locDanhSachCacLopDangMentor","dsMaLop","result","locDanhSachCacBuoiDangMentor","listMaBuoiHoc","title","render","text","key","dataIndex","sorter","a","b","handleGetDanhGiaMentorTheoThang","date","width","e","target","subtract","dateS","lineHeight","top","ChiTietDanhGiaMentorComponent","props","isHiddenName","setIsHiddenName","dataTable","setDataTable","danhSachNhacNho","setDanhSachNhacNho","isVisibleModalXemNhacNho","setIsVisibleModalXemNhacNho","isVisibleThemNhacNhoModal","setIsVisibleThemNhacNhoModal","modelNhacNho","setModelNhacNho","dsNguoiDung","danhSachLop","danhSachDanhGia","lengthDanhMucDanhGia","isDanhGia","tenKey","replaceAll","handleLuuThongTin","model","MaNguoiNhacNho","NoiDungNhacNho","noiDungNhacNho","themNhacNhoMentorService","info","newModelNhacNho","Id","DaXoa","DateTime","UpdateAt","LyDoXoa","MaNguoiXoa","newDanhSachNhacNho","columnNhacNho","x","NgayTao","colXemDanhGia","TenNguoiDanhGia","Hotrotrenlophoc","Ngontugiaotiep","Hotrongoaigio","Nhiettinh","Chiasekienthuc","Thaidohotro","handleChangeInput","NhanXetHocVienComponent","NhanXetHocVien","NhanXet","trim"],"sources":["D:/BIG-PROJECT/WIKI/FE/crmmentor/src/pages/danh-gia-mentor/DanhGiaMentorV3.jsx"],"sourcesContent":["import React, { useEffect, useState, useMemo, useReducer } from \"react\";\r\nimport {\r\n  DatePicker,\r\n  Tag,\r\n  Select,\r\n  Checkbox,\r\n  Table,\r\n  Input,\r\n  InputNumber,\r\n  Button,\r\n  Modal,\r\n  message,\r\n  Radio,\r\n  Spin,\r\n  Tooltip,\r\n  Rate,\r\n  Badge,\r\n  Switch,\r\n  Popconfirm,\r\n} from \"antd\";\r\nimport { useSearchParams } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { BulbFilled } from \"@ant-design/icons\";\r\nimport { removeVietnameseTones } from \"../../utils\";\r\nimport _ from \"lodash\";\r\nimport {\r\n  callApiDanhSachDanhGiaCrmTheoThang,\r\n  updateNhacNhoMentor,\r\n} from \"../../redux/reducers/danhGiaMentorReducer\";\r\n\r\nimport { AdminService } from \"../../services/AdminService\";\r\nimport { ClassStatusSwitch } from \"../../utils/SelectOption\";\r\n\r\nconst { Option } = Select;\r\nconst { Search } = Input;\r\nconst { MonthPicker, RangePicker, WeekPicker } = DatePicker;\r\n\r\nconst initialState = {\r\n  isLoading: false,\r\n  data: [],\r\n  isModalChiTietDanhGiaVisible: false,\r\n  recordDangChon: {},\r\n};\r\n\r\nconst CONSTANTS = {\r\n  SET_IS_LOADING: \"SET_IS_LOADING\",\r\n  SET_DATA: \"SET_DATA\",\r\n  SET_MODAL_CHI_TIET_DANH_GIA_VISIBLE: \"SET_MODAL_CHI_TIET_DANH_GIA_VISIBLE\",\r\n  SET_RECORD_XEM_CHI_TIET_DANH_GIA: \"SET_RECORD_XEM_CHI_TIET_DANH_GIA\",\r\n};\r\n\r\nfunction asyncThing(value) {\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => resolve(value), 100);\r\n  });\r\n}\r\n\r\nexport default function DanhGiaMentorV3() {\r\n  const dispatch = useDispatch();\r\n  let thangTruoc = new Date();\r\n  thangTruoc.setDate(1);\r\n  thangTruoc.setMonth(thangTruoc.getMonth() - 1);\r\n\r\n  let [searchParams, setSearchParams] = useSearchParams({\r\n    type_search: \"tenLop\",\r\n    value_search: \"\",\r\n    theo_day: \"null\",\r\n    theo_month: thangTruoc,\r\n    nx: 0,\r\n    tieuChi: \"[0,1,2,3,4,5]\",\r\n    diemTu: \"-1\",\r\n    diemDen: \"-1\",\r\n    loai_gv: 2,\r\n    cb: 0,\r\n    tgm: \"Tatca\",\r\n    dscnkt: \"[]\",\r\n    mtkcl: 0,\r\n    gbm: 0,\r\n    tfbvl: 1,\r\n  });\r\n\r\n  //get range date value\r\n  let rangeValue = null;\r\n  if (searchParams.get(\"theo_day\") != \"null\") {\r\n    rangeValue = JSON.parse(searchParams.get(\"theo_day\"));\r\n    rangeValue = [moment(rangeValue[0]), moment(rangeValue[1])];\r\n  }\r\n\r\n  let inputSearchType = searchParams.get(\"type_search\");\r\n  let theoThang = searchParams.get(\"theo_month\")\r\n    ? searchParams.get(\"theo_month\")\r\n    : \"null\";\r\n  let inputSearchValue = searchParams.get(\"value_search\");\r\n  let tieuChi = null;\r\n  if (searchParams.get(\"tieuChi\") != \"null\") {\r\n    tieuChi = JSON.parse(searchParams.get(\"tieuChi\"));\r\n  }\r\n  let diemTu = Number(searchParams.get(\"diemTu\"));\r\n  let diemDen = Number(searchParams.get(\"diemDen\"));\r\n  let isCoNhanXet = +searchParams.get(\"nx\");\r\n  let loaiNguoiDung = searchParams.get(\"loai_gv\")\r\n    ? +searchParams.get(\"loai_gv\")\r\n    : 2;\r\n  let isChuaChamBai = +searchParams.get(\"cb\");\r\n\r\n  let thoiGianMentor = searchParams.get(\"tgm\")\r\n    ? searchParams.get(\"tgm\")\r\n    : \"Tatca\";\r\n  let dsChiNhanhKiemTra = searchParams.get(\"dscnkt\")\r\n    ? JSON.parse(searchParams.get(\"dscnkt\"))\r\n    : [];\r\n  let isChuaCoLopMentor = +searchParams.get(\"mtkcl\");\r\n  let isGroupByMentor = +searchParams.get(\"gbm\");\r\n  let isTatFilterThoiGianVaLopMentor = +searchParams.get(\"tfbvl\")\r\n\r\n  const reducer = (state, { type, payload }) => {\r\n    switch (type) {\r\n      case CONSTANTS.SET_IS_LOADING:\r\n        return {\r\n          ...state,\r\n          isLoading: true,\r\n        };\r\n      case CONSTANTS.SET_DATA:\r\n        return {\r\n          ...state,\r\n          data: payload,\r\n        };\r\n      case CONSTANTS.SET_MODAL_CHI_TIET_DANH_GIA_VISIBLE:\r\n        return {\r\n          ...state,\r\n          isModalChiTietDanhGiaVisible: payload,\r\n        };\r\n      case CONSTANTS.SET_RECORD_XEM_CHI_TIET_DANH_GIA:\r\n        return {\r\n          ...state,\r\n          isModalChiTietDanhGiaVisible: true,\r\n          recordDangChon: payload,\r\n        };\r\n      default:\r\n        return state;\r\n    }\r\n  };\r\n\r\n  const [state, dispatchLocal] = useReducer(reducer, initialState);\r\n\r\n  const dsNguoiDungObject = useSelector(\r\n    (state) => state.userReducer.dsNguoiDungObject\r\n  );\r\n\r\n  const danhSachLopObject = useSelector(\r\n    (state) => state.lopHocReducer.danhSachLopObject\r\n  );\r\n\r\n  const dsConfig = useSelector((state) => state.adminReducer.dsConfig);\r\n \r\n\r\n  const LICH_HOC = JSON.parse(\r\n    dsConfig?.find((item) => item.id === \"LICH_HOC\")?.noiDung\r\n  );\r\n\r\n  const danhMucDanhGia = useSelector(\r\n    (state) => state.danhGiaMentorReducer.danhMucDanhGia\r\n  );\r\n\r\n  const dsChiNhanh = useSelector((state) => state.lopHocReducer.dsChiNhanh);\r\n\r\n  const dsMentorChiNhanh = useSelector(\r\n    (state) => state.quanLyMentorReducer.danhSachMentorChiNhanh\r\n  );\r\n\r\n  const danhSachDanhGiaCrmTheoThang = useSelector(\r\n    (state) => state.danhGiaMentorReducer.danhSachDanhGiaCrmTheoThang\r\n  );\r\n\r\n  const [danhSachDanhGiaCrmTheoThangGroupByMentor, danhSachMentorIdCoLop] =\r\n    useMemo(\r\n      () =>\r\n        groupDanhSachDanhGiaCrmTheoThangByMentor(danhSachDanhGiaCrmTheoThang),\r\n      [danhSachDanhGiaCrmTheoThang.length]\r\n    );\r\n\r\n  const isLoading = useSelector(\r\n    (state) => state.danhGiaMentorReducer.isLoading\r\n  );\r\n\r\n  const danhSachMentorChuaChamBai = useSelector(\r\n    (state) => state.danhGiaMentorReducer.danhSachMentorChuaChamBai\r\n  );\r\n\r\n  const OPTIONS_THOI_GIAN_MENTOR = [\r\n    {\r\n      value: \"Sang\",\r\n      label: \"Sáng\",\r\n    },\r\n    {\r\n      value: \"Chieu\",\r\n      label: \"Chiều\",\r\n    },\r\n    {\r\n      value: \"Tatca\",\r\n      label: \"Tất cả\",\r\n    },\r\n  ];\r\n\r\n  useEffect(() => {\r\n    let isMount = true;\r\n\r\n    if (isMount) {\r\n      handleFilterData();\r\n    }\r\n\r\n    return () => {\r\n      isMount = false;\r\n    };\r\n  }, [isChuaCoLopMentor, isGroupByMentor, thoiGianMentor, isTatFilterThoiGianVaLopMentor]);\r\n\r\n  useEffect(() => {\r\n    let isMount = true;\r\n\r\n    if (isMount) {\r\n      handleFilterData();\r\n    }\r\n\r\n    return () => {\r\n      isMount = false;\r\n    };\r\n  }, [danhSachDanhGiaCrmTheoThang]);\r\n\r\n  \r\n\r\n  \r\n\r\n  function groupDanhSachDanhGiaCrmTheoThangByMentor(\r\n    danhSachDanhGiaMentorCrmTheoThang\r\n  ) {\r\n    let dataGroup = [];\r\n\r\n    let groupIdMentor = [];\r\n\r\n    let lengthDanhSachDanhGia = danhSachDanhGiaCrmTheoThang.length;\r\n\r\n    for (let i = 0; i < lengthDanhSachDanhGia; i++) {\r\n      let record = danhSachDanhGiaCrmTheoThang[i];\r\n      // check chưa có trong data group thì thêm vào\r\n\r\n      if (!groupIdMentor.includes(record.MentorId)) {\r\n        let newArrayMaLop = [record.MaLop];\r\n        groupIdMentor.push(record.MentorId);\r\n        dataGroup.push({\r\n          ...record,\r\n          DanhSachMaLop: newArrayMaLop,\r\n          SoLopDangMentor: 1,\r\n        });\r\n        continue;\r\n      }\r\n      // co trong data group thì gộp data\r\n\r\n      //lay thang dang co ra\r\n      let recordDaLuu = dataGroup.find(\r\n        (item) => item.MentorId === record.MentorId\r\n      );\r\n\r\n      let dataDanhGiaDaLuu = JSON.parse(recordDaLuu.DanhSachDanhGia);\r\n\r\n      let dataDanhGiaChuaLuu = JSON.parse(record.DanhSachDanhGia);\r\n\r\n      let danhSachMerge = dataDanhGiaDaLuu.concat(dataDanhGiaChuaLuu);\r\n      \r\n      recordDaLuu.DanhSachMaLop.push(record.MaLop);\r\n      recordDaLuu.SoLopDangMentor += 1;\r\n      recordDaLuu.DanhSachDanhGia = JSON.stringify(danhSachMerge);\r\n    }\r\n\r\n    return [dataGroup, groupIdMentor];\r\n  }\r\n\r\n  function tinhDiemDuaTheoTieuChi(dataDiem, tieuChiArray) {\r\n    let count = 0;\r\n    let tongDiem = 0;\r\n\r\n    dataDiem.map((item) => {\r\n      //moi item la mot array\r\n      item?.ChiTietDanhGia.map((item, index) => {\r\n        //chi nhung index o vao tieu chi thi moi push vao arrayDiem\r\n        if (tieuChiArray === null) {\r\n          tongDiem += item?.DiemDanhGia;\r\n          count += 1;\r\n        } else if (tieuChiArray.includes(index)) {\r\n          tongDiem += item?.DiemDanhGia;\r\n          count += 1;\r\n        }\r\n      });\r\n    });\r\n\r\n    return tongDiem / count;\r\n  }\r\n\r\n  function kiemTraTrangThaiTable(isGroupByMentor, isChuaCoLopMentor) {\r\n\r\n    if (isGroupByMentor) return isChuaCoLopMentor ? colMentorChuaCoLop : colMentorCoLopGroupByMentor\r\n\r\n    return isChuaCoLopMentor ? colMentorChuaCoLop : colMentorCoLop;\r\n  }\r\n\r\n  async function locTheoLoaiNguoiDung(data, loaiNguoiDung) {\r\n    let loaiNguoiDungCanCheck = loaiNguoiDung === 1 ? \"GIANGVIEN\" : \"MENTOR\";\r\n    const arrTemp = await Promise.all(await asyncThing(data));\r\n    return arrTemp.filter((item) => {\r\n      return item.MaNhomQuyen === loaiNguoiDungCanCheck;\r\n    });\r\n  }\r\n\r\n  async function locChuaChamBai(data, danhSachMentorChuaChamBai) {\r\n    const arrTemp = await Promise.all(await asyncThing(data));\r\n    return arrTemp.filter((item) => {\r\n      let isCoTenTrongDanhSach = danhSachMentorChuaChamBai.hasOwnProperty(\r\n        item.MentorId\r\n      );\r\n\r\n      let isLopChuaCham = false;\r\n\r\n      if (isCoTenTrongDanhSach) {\r\n        isLopChuaCham = danhSachMentorChuaChamBai[\r\n          item.MentorId\r\n        ].danhSachCacLopQuaHanCham.hasOwnProperty(item.MaLop);\r\n      }\r\n\r\n      return isCoTenTrongDanhSach && isLopChuaCham;\r\n    });\r\n  }\r\n\r\n  function checkString(dataCheck, inputValue) {\r\n    return removeVietnameseTones(dataCheck.toString())\r\n      .toLowerCase()\r\n      .includes(removeVietnameseTones(inputValue).toLowerCase());\r\n  }\r\n\r\n  async function locTheoInputKiemTra(data, type, inputValue) {\r\n    const arrTemp = await Promise.all(await asyncThing(data));\r\n\r\n    return arrTemp.filter((item) => {\r\n      // let isKiemTraDiemDanhGia = diemTu !== -1;\r\n\r\n      // let isDuDieuKien = true;\r\n      // if (isKiemTraDiemDanhGia) {\r\n      //   isDuDieuKien = JSON.parse(item.NoiDungDanhGia)?.some(\r\n      //     (item) => item.DiemDanhGia >= diemTu && item.DiemDanhGia <= diemDen\r\n      //   );\r\n      // }\r\n\r\n      // if (isCoNhanXet) {\r\n      //   isDuDieuKien = JSON.parse(item.NoiDungDanhGia)?.some(\r\n      //     (item) => item.NhanXet.trim() !== \"\"\r\n      //   );\r\n      // }\r\n\r\n      switch (type) {\r\n        case \"tenLop\":\r\n          return checkString(item.TenLopHoc, inputValue);\r\n        case \"hoTen\":\r\n          return checkString(item.HoTen, inputValue);\r\n\r\n        case \"email\":\r\n          return checkString(item.Email, inputValue);\r\n\r\n        case \"soDienThoai\":\r\n          return checkString(item.SoDT, inputValue);\r\n\r\n        default:\r\n          return false;\r\n      }\r\n    });\r\n  }\r\n\r\n  function locDanhSachMentorDangCoLopCoTheMentor(\r\n    dsMentorChiNhanh,\r\n    thoiGianMentor,\r\n    dsChiNhanhKiemTra,\r\n    dataFiltered\r\n  ) {\r\n    // console.log({thoiGianMentor, dsChiNhanhKiemTra})\r\n\r\n  \r\n    \r\n    let lsMentorCoTheMentor = locCacMentorCoTheMentorTheoChiNhanhVaThoiGian(\r\n      dsMentorChiNhanh,\r\n      thoiGianMentor,\r\n      dsChiNhanhKiemTra\r\n    );\r\n\r\n   \r\n\r\n    // console.log(lsMentorCoTheMentor)\r\n    let data = [];\r\n\r\n    for (let i = 0; i < dataFiltered.length; i++) {\r\n      let record = dataFiltered[i];\r\n      // console.log(record)\r\n      if (lsMentorCoTheMentor.includes(record.MentorId)) {\r\n        data.push(record);\r\n      }\r\n    }\r\n\r\n    return data;\r\n  }\r\n\r\n  function locCacMentorCoTheMentorTheoChiNhanhVaThoiGian(\r\n    dsMentorChiNhanh,\r\n    thoiGianMentor,\r\n    dsChiNhanhKiemTra\r\n  ) {\r\n    let lsMentorCoTheMentor = [];\r\n    for (let i = 0; i < dsMentorChiNhanh.length; i++) {\r\n      let record = dsMentorChiNhanh[i];\r\n\r\n      // Nếu chọn tất cả thì đá tụi sáng và chiều ra không xử lý\r\n\r\n      if (thoiGianMentor === \"Tatca\") {\r\n        if (record.thoiGianMentor !== thoiGianMentor) {\r\n          continue;\r\n        }\r\n      } else {\r\n        if (\r\n          record.thoiGianMentor !== \"Tatca\" &&\r\n          record.thoiGianMentor !== thoiGianMentor\r\n        ) {\r\n          continue;\r\n        }\r\n      }\r\n\r\n      // Nếu chọn sáng hoặc chiều thì gom thêm thằng tất cả vào\r\n\r\n      // neu ma khong chon chi nhanh thi lum het mentor dang ky vao\r\n      if (dsChiNhanhKiemTra.length === 0) {\r\n        lsMentorCoTheMentor.push(record.id);\r\n      } else {\r\n        let dsChiNhanhCoTheMentor = JSON.parse(record.danhSachChiNhanhMentor);\r\n\r\n        for (let j = 0; j < dsChiNhanhCoTheMentor.length; j++) {\r\n          if (dsChiNhanhKiemTra.includes(dsChiNhanhCoTheMentor[j])) {\r\n            lsMentorCoTheMentor.push(record.id);\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return lsMentorCoTheMentor;\r\n  }\r\n\r\n  function locDanhSachMentorChuaCoLopCoTheMentor(\r\n    dsMentorChiNhanh,\r\n    thoiGianMentor,\r\n    dsChiNhanhKiemTra,\r\n    dataFiltered\r\n  ) {\r\n    // Mentor chua co lop la cac mentor thoa dieu kien nhung khong nam trong datafiletered\r\n\r\n    let lsMentorCoTheMentor = locCacMentorCoTheMentorTheoChiNhanhVaThoiGian(\r\n      dsMentorChiNhanh,\r\n      thoiGianMentor,\r\n      dsChiNhanhKiemTra\r\n    );\r\n\r\n    let lsMentorDaCoLop = [];\r\n\r\n    for (let i = 0; i < dataFiltered.length; i++) {\r\n      let lopHoc = dataFiltered[i];\r\n      if (lsMentorDaCoLop.includes(lopHoc.MentorId)) {\r\n        // co roi thi next\r\n        continue;\r\n      }\r\n      lsMentorDaCoLop.push(lopHoc.MentorId);\r\n    }\r\n    // console.log(lsMentorCoTheMentor)\r\n    // console.log(lsMentorCoTheMentor)\r\n    let data = [];\r\n\r\n    for (let i = 0; i < lsMentorCoTheMentor.length; i++) {\r\n      let mentorId = lsMentorCoTheMentor[i];\r\n      //  console.log(lsMentorDaCoLop)\r\n      if (!lsMentorDaCoLop.includes(mentorId)) {\r\n        let { hoTen, email, soDT } = dsNguoiDungObject[mentorId];\r\n        let { thoiGianMentor, danhSachChiNhanhMentor } = dsMentorChiNhanh.find(\r\n          (item) => item.id === mentorId\r\n        );\r\n        data.push({\r\n          MentorId: mentorId,\r\n          HoTen: hoTen,\r\n          Email: email,\r\n          SoDT: soDT,\r\n          MaNhomQuyen: \"MENTOR\",\r\n          TenLopHoc: \"Chưa có lớp\",\r\n          MaLop: 0,\r\n          DanhSachDanhGia: \"[]\",\r\n          DanhSachNhacNho: null,\r\n          ThoiGianMentor: thoiGianMentor,\r\n          DanhSachChiNhanhMentor: danhSachChiNhanhMentor,\r\n        });\r\n      }\r\n    }\r\n\r\n    return data;\r\n  }\r\n\r\n  const handleFilterData = async () => {\r\n    try {\r\n      let dataFiltered = [];\r\n\r\n      if (danhSachDanhGiaCrmTheoThang?.length > 0 && isGroupByMentor) {\r\n        dataFiltered = danhSachDanhGiaCrmTheoThangGroupByMentor;\r\n      } else if (danhSachDanhGiaCrmTheoThang?.length > 0) {\r\n        dataFiltered = danhSachDanhGiaCrmTheoThang;\r\n      }\r\n\r\n      if (isChuaCoLopMentor) {\r\n        dataFiltered = locDanhSachMentorChuaCoLopCoTheMentor(\r\n          dsMentorChiNhanh,\r\n          thoiGianMentor,\r\n          dsChiNhanhKiemTra,\r\n          dataFiltered\r\n        );\r\n      } else {\r\n        if (!isTatFilterThoiGianVaLopMentor) {\r\n          dataFiltered = locDanhSachMentorDangCoLopCoTheMentor(\r\n            dsMentorChiNhanh,\r\n            thoiGianMentor,\r\n            dsChiNhanhKiemTra,\r\n            dataFiltered\r\n          );\r\n        }\r\n        \r\n      }\r\n\r\n      // console.log(dataFiltered)\r\n\r\n      // Kiem tra xem co filter theo loai nguoi dung khong\r\n      if (loaiNguoiDung > 0) {\r\n        locTheoLoaiNguoiDung(dataFiltered, loaiNguoiDung).then((res) => {\r\n          dataFiltered = res;\r\n        });\r\n      }\r\n\r\n      // Kiem tra xem co filter theo ngay thang gi khong\r\n      // if (searchParams.get(\"theo_day\") !== \"null\") {\r\n      //   locTheoKhoangThoiGian(dataFiltered, rangeValue).then((res) => {\r\n      //     dataFiltered = res;\r\n      //   });\r\n      // }\r\n\r\n      // if (searchParams.get(\"theo_month\") !== \"null\") {\r\n      //   locTheoThang(dataFiltered, theoThang).then((res) => {\r\n      //     dataFiltered = res;\r\n      //   });\r\n      // }\r\n\r\n      if (danhSachMentorChuaChamBai && isChuaChamBai) {\r\n        locChuaChamBai(dataFiltered, danhSachMentorChuaChamBai).then((res) => {\r\n          dataFiltered = res;\r\n        });\r\n      }\r\n\r\n      asyncThing(dataFiltered).then((res) => {\r\n        // Lọc xong theo khoảng thời gian rồi xem co filter theo ten hay lop gi khong\r\n        if (inputSearchValue !== \"null\") {\r\n          locTheoInputKiemTra(\r\n            dataFiltered,\r\n            inputSearchType,\r\n            inputSearchValue\r\n          ).then((res) => {\r\n            // mergeDuLieu(res);\r\n            dispatchLocal({ type: CONSTANTS.SET_DATA, payload: res });\r\n          });\r\n        }\r\n      });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  // const handleGetAllTime = () => {\r\n  //   searchParams.set(\"theo_month\", \"null\");\r\n  //   searchParams.set(\"theo_day\", \"null\");\r\n  //   setSearchParams(searchParams);\r\n  //   handleFilterData();\r\n  // };\r\n\r\n  \r\n\r\n  const handleResetFilter = () => {\r\n    searchParams.set(\"theo_month\", \"null\");\r\n    searchParams.set(\"theo_day\", \"null\");\r\n    searchParams.set(\"value_search\", \"\");\r\n    searchParams.set(\"diemTu\", \"-1\");\r\n    searchParams.set(\"diemDen\", \"-1\");\r\n    searchParams.set(\"nx\", 0);\r\n    searchParams.set(\"loai_gv\", 0);\r\n    searchParams.set(\"cb\", 0);\r\n    searchParams.set(\"mtkcl\", 0);\r\n    searchParams.set(\"tgm\", \"Tatca\");\r\n    searchParams.set(\"dscnkt\", \"[]\");\r\n    searchParams.set(\"tfbvl\", 1)\r\n    setSearchParams(searchParams);\r\n    handleFilterData();\r\n  };\r\n\r\n  //hanlde search class\r\n  const handleSearch = (value, name) => {\r\n    switch (name) {\r\n      case \"bh\": {\r\n        searchParams.set(name, JSON.stringify(value));\r\n        break;\r\n      }\r\n      case \"theo_day\": {\r\n        searchParams.set(name, JSON.stringify(value));\r\n        searchParams.set(\"theo_month\", \"null\");\r\n\r\n        break;\r\n      }\r\n      case \"theo_month\": {\r\n        searchParams.set(name, value);\r\n        searchParams.set(\"theo_day\", \"null\");\r\n        break;\r\n      }\r\n\r\n      case \"cb\":\r\n      case \"gbm\":\r\n        case \"tfbvl\":\r\n      case \"nx\": {\r\n        searchParams.set(name, value ? 1 : 0);\r\n        break;\r\n      }\r\n\r\n      case \"mtkcl\": {\r\n        searchParams.set(name, value ? 1 : 0);\r\n\r\n        // neu bat khong co lop len thi check chua cham bai va group by mentor de tat di\r\n        if (value) {\r\n          if (isChuaChamBai) searchParams.set(\"cb\",0)\r\n          if (isGroupByMentor) searchParams.set(\"gbm\", 0)\r\n        }\r\n\r\n        break;\r\n      }\r\n\r\n      default: {\r\n        searchParams.set(name, value);\r\n        break;\r\n      }\r\n    }\r\n\r\n    setSearchParams(searchParams);\r\n  };\r\n\r\n  function tinhSoBaiTapHetHanChuaCham(record) {\r\n    const { MentorId, MaLop } = record;\r\n    if (danhSachMentorChuaChamBai) {\r\n      let isCoTenTrongDanhSach =\r\n        danhSachMentorChuaChamBai.hasOwnProperty(MentorId);\r\n\r\n      let isLopChuaCham = false;\r\n\r\n      if (isCoTenTrongDanhSach) {\r\n        isLopChuaCham =\r\n          danhSachMentorChuaChamBai[\r\n            MentorId\r\n          ].danhSachCacLopQuaHanCham.hasOwnProperty(MaLop);\r\n      }\r\n\r\n      if (isCoTenTrongDanhSach && isLopChuaCham) {\r\n        return Object.keys(\r\n          danhSachMentorChuaChamBai[MentorId].danhSachCacLopQuaHanCham\r\n        ).length;\r\n      }\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  function tinhTongDiemTrungBinhDanhGia(record) {\r\n    const DanhSachDanhGia = JSON.parse(record?.DanhSachDanhGia);\r\n\r\n    let lengthDanhSachDanhGia = danhMucDanhGia?.length;\r\n    let mangData = [];\r\n\r\n    //hoc vien 40%\r\n    //mentor giang vien 30%\r\n\r\n    for (let i = 0; i < lengthDanhSachDanhGia; i++) {\r\n      let item = DanhSachDanhGia[i];\r\n\r\n      let diem = 0;\r\n\r\n      let mangNoiDungDanhGia = [];\r\n      if (item?.NoiDungDanhGia) {\r\n        mangNoiDungDanhGia = JSON.parse(item?.NoiDungDanhGia);\r\n      }\r\n\r\n      let mangDiem = [];\r\n      let lengthDanhSachDanhGia = mangNoiDungDanhGia.length;\r\n\r\n      if (lengthDanhSachDanhGia > 0) {\r\n        for (let j = 0; j < mangNoiDungDanhGia.length; j++) {\r\n          mangDiem.push(mangNoiDungDanhGia[j]?.DiemDanhGia);\r\n        }\r\n      }\r\n\r\n      if (mangDiem.length > 0) {\r\n        diem = _.mean(mangDiem);\r\n      }\r\n\r\n      if (item?.LoaiDanhGia === \"HOCVIEN\") {\r\n        diem *= 0.4;\r\n      } else {\r\n        diem *= 0.3;\r\n      }\r\n\r\n      mangData.push(diem);\r\n    }\r\n\r\n    return _.mean(mangData).toFixed(3);\r\n  }\r\n\r\n  function tinhSoLopDangMentor(record) {\r\n    let soLopMentor = 0;\r\n\r\n    let soLuongRecord = danhSachDanhGiaCrmTheoThang.length;\r\n\r\n    for (let i = 0; i < soLuongRecord; i++) {\r\n      if (danhSachDanhGiaCrmTheoThang[i].MentorId === record.MentorId) {\r\n        soLopMentor++;\r\n      }\r\n    }\r\n    return soLopMentor;\r\n  }\r\n\r\n  function tinhTongDanhGiaGiangVien(record) {\r\n    const DanhSachDanhGia = JSON.parse(record?.DanhSachDanhGia);\r\n\r\n    let lengthDanhSachDanhGia = danhMucDanhGia?.length;\r\n    let mangData = [];\r\n\r\n    //hoc vien 40%\r\n    //mentor giang vien 30%\r\n\r\n    for (let i = 0; i < lengthDanhSachDanhGia; i++) {\r\n      let item = DanhSachDanhGia[i];\r\n      if (item?.LoaiDanhGia === \"HOCVIEN\" || item?.LoaiDanhGia === \"MENTOR\") {\r\n        continue;\r\n      }\r\n      let diem = 0;\r\n\r\n      let mangNoiDungDanhGia = [];\r\n      if (item?.NoiDungDanhGia) {\r\n        mangNoiDungDanhGia = JSON.parse(item?.NoiDungDanhGia);\r\n      }\r\n\r\n      let mangDiem = [];\r\n      let lengthDanhSachDanhGia = mangNoiDungDanhGia.length;\r\n\r\n      if (lengthDanhSachDanhGia > 0) {\r\n        for (let j = 0; j < mangNoiDungDanhGia.length; j++) {\r\n          mangDiem.push(mangNoiDungDanhGia[j]?.DiemDanhGia);\r\n        }\r\n      }\r\n\r\n      if (mangDiem.length > 0) {\r\n        diem = _.mean(mangDiem);\r\n      }\r\n\r\n      mangData.push(diem);\r\n    }\r\n    if (mangData.length === 0) return 0;\r\n    return _.mean(mangData).toFixed(3);\r\n  }\r\n\r\n  function tinhTongDanhGiaHocVien(record) {\r\n    const DanhSachDanhGia = JSON.parse(record?.DanhSachDanhGia);\r\n\r\n    let lengthDanhSachDanhGia = danhMucDanhGia?.length;\r\n    let mangData = [];\r\n\r\n    //hoc vien 40%\r\n    //mentor giang vien 30%\r\n\r\n    for (let i = 0; i < lengthDanhSachDanhGia; i++) {\r\n      let item = DanhSachDanhGia[i];\r\n      if (item?.LoaiDanhGia !== \"HOCVIEN\") {\r\n        continue;\r\n      }\r\n      let diem = 0;\r\n\r\n      let mangNoiDungDanhGia = [];\r\n      if (item?.NoiDungDanhGia) {\r\n        mangNoiDungDanhGia = JSON.parse(item?.NoiDungDanhGia);\r\n      }\r\n\r\n      let mangDiem = [];\r\n      let lengthDanhSachDanhGia = mangNoiDungDanhGia.length;\r\n\r\n      if (lengthDanhSachDanhGia > 0) {\r\n        for (let j = 0; j < mangNoiDungDanhGia.length; j++) {\r\n          mangDiem.push(mangNoiDungDanhGia[j]?.DiemDanhGia);\r\n        }\r\n      }\r\n\r\n      if (mangDiem.length > 0) {\r\n        diem = _.mean(mangDiem);\r\n      }\r\n\r\n      mangData.push(diem);\r\n    }\r\n\r\n    return _.mean(mangData).toFixed(3);\r\n  }\r\n\r\n  function tinhSoLuongDanhGia(record) {\r\n    const DanhSachDanhGia = JSON.parse(record?.DanhSachDanhGia);\r\n// console.log(record)\r\n    let lengthDanhSachDanhGia = DanhSachDanhGia?.length;\r\n    let soLuongDanhGia = 0\r\n\r\n    //hoc vien 40%\r\n    //mentor giang vien 30%\r\n\r\n    for (let i = 0; i < lengthDanhSachDanhGia; i++) {\r\n      let item = DanhSachDanhGia[i];\r\n      \r\n      if (item?.NoiDungDanhGia) {\r\n        soLuongDanhGia++\r\n      }\r\n      \r\n      }\r\n\r\n      \r\n    return [soLuongDanhGia,lengthDanhSachDanhGia]\r\n  }\r\n\r\n  function tinhTongDanhGiaMentor(record) {\r\n    const DanhSachDanhGia = JSON.parse(record?.DanhSachDanhGia);\r\n\r\n    let lengthDanhSachDanhGia = danhMucDanhGia?.length;\r\n    let mangData = [];\r\n\r\n    //hoc vien 40%\r\n    //mentor giang vien 30%\r\n\r\n    for (let i = 0; i < lengthDanhSachDanhGia; i++) {\r\n      let item = DanhSachDanhGia[i];\r\n\r\n      if (item?.LoaiDanhGia !== \"MENTOR\") {\r\n        continue;\r\n      }\r\n      let diem = 0;\r\n\r\n      let mangNoiDungDanhGia = [];\r\n      if (item?.NoiDungDanhGia) {\r\n        mangNoiDungDanhGia = JSON.parse(item?.NoiDungDanhGia);\r\n      }\r\n\r\n      let mangDiem = [];\r\n      let lengthDanhSachDanhGia = mangNoiDungDanhGia.length;\r\n\r\n      if (lengthDanhSachDanhGia > 0) {\r\n        for (let j = 0; j < mangNoiDungDanhGia.length; j++) {\r\n          mangDiem.push(mangNoiDungDanhGia[j]?.DiemDanhGia);\r\n        }\r\n      }\r\n\r\n      if (mangDiem.length > 0) {\r\n        diem = _.mean(mangDiem);\r\n      }\r\n\r\n      mangData.push(diem);\r\n    }\r\n\r\n    if (mangData.length === 0) return 0;\r\n\r\n    return _.mean(mangData).toFixed(3);\r\n  }\r\n\r\n  function taoThongTinTenLopHoc(maLop, LICH_HOC) {\r\n    const { tenLopHoc, ngayKetThuc, thoiKhoaBieu, chiNhanh } =\r\n      danhSachLopObject[maLop];\r\n\r\n    return (\r\n      <>\r\n        <p>{tenLopHoc}</p>\r\n        <Tag color=\"red\">\r\n          {\r\n            dsChiNhanh.find((chiNhanhMau) => chiNhanhMau.id === chiNhanh)\r\n              ?.tenChiNhanh\r\n          }{\" \"}\r\n        </Tag>\r\n        <p>\r\n          <span>Ngày kết thúc: </span>{\" \"}\r\n          {moment(ngayKetThuc).format(\"DD/MM/yyyy\")}\r\n        </p>\r\n        <p>\r\n          {JSON.parse(thoiKhoaBieu)?.map((ngayHoc, index) => {\r\n            return (\r\n              <Tag color=\"blue\" key={`TagLichHoc_${index}`}>\r\n                {\" \"}\r\n                {LICH_HOC.find((item) => item.value === ngayHoc)?.label}{\" \"}\r\n              </Tag>\r\n            );\r\n          })}\r\n        </p>\r\n      </>\r\n    );\r\n  }\r\n  function locDanhSachCacLopDangMentor(dsMaLop) {\r\n    let result = []\r\n    for(let i = 0; i < dsMaLop.length; i++) {\r\n      let maLop = dsMaLop[i]\r\n      let lopHoc = danhSachLopObject[maLop] \r\n      result.push(<>\r\n        <Tag color=\"red\">{`${lopHoc.tenLopHoc} - ${ dsChiNhanh.find((chiNhanh) => chiNhanh.id === lopHoc.chiNhanh)\r\n                    ?.tenChiNhanh}`}</Tag>\r\n      </>)\r\n    }\r\n    return result\r\n  }\r\n\r\n  function locDanhSachCacBuoiDangMentor(dsMaLop) {\r\n    let result = []\r\n    let listMaBuoiHoc = []\r\n    for(let i = 0; i < dsMaLop.length; i++) {\r\n      let maLop = dsMaLop[i]\r\n      let lopHoc = danhSachLopObject[maLop] \r\n     listMaBuoiHoc = listMaBuoiHoc.concat(JSON.parse(lopHoc.thoiKhoaBieu))\r\n    }\r\n\r\n    result = listMaBuoiHoc?.map((ngayHoc, index) => {\r\n      return (\r\n        <Tag color=\"blue\" key={`TagLichHocGroupByMentor_${index}`}>\r\n          {\" \"}\r\n          {LICH_HOC.find((item) => item.value === ngayHoc)?.label}{\" \"}\r\n        </Tag>\r\n      );\r\n    })\r\n    \r\n    return result\r\n  \r\n  \r\n  }\r\n\r\n   \r\n  \r\n\r\n  const colMentorChuaCoLop = [\r\n    {\r\n      title: \"Tên mentor\",\r\n      render: (text, record) => {\r\n        return record.HoTen;\r\n      },\r\n      key: \"hoTen\",\r\n      dataIndex: \"hoTen\",\r\n    },\r\n    {\r\n      title: \"Email\",\r\n      render: (text, record) => {\r\n        return record.Email;\r\n      },\r\n      key: \"email\",\r\n      dataIndex: \"email\",\r\n    },\r\n    {\r\n      title: \"Số điện thoại\",\r\n      render: (text, record) => {\r\n        return record.SoDT;\r\n      },\r\n      key: \"soDT\",\r\n      dataIndex: \"soDT\",\r\n    },\r\n    {\r\n      title: \"Thời gian mentor\",\r\n      render: (text, record) => {\r\n        // console.log(record)\r\n        return (\r\n          <Tag color=\"green\">\r\n            {\" \"}\r\n            {\r\n              OPTIONS_THOI_GIAN_MENTOR.find(\r\n                (item) => item.value === record.ThoiGianMentor\r\n              )?.label\r\n            }\r\n          </Tag>\r\n        );\r\n      },\r\n      key: \"thoiGianMentor\",\r\n      dataIndex: \"thoiGianMentor\",\r\n    },\r\n    {\r\n      title: \"Chi nhánh đăng ký mentor\",\r\n      render: (text, record) => {\r\n        // console.log(record)\r\n        // console.log(dsChiNhanh)\r\n        return (\r\n          record.DanhSachChiNhanhMentor &&\r\n          JSON.parse(record.DanhSachChiNhanhMentor)?.map((item) => {\r\n            // console.log(item)\r\n            return (\r\n              <Tag color=\"red\">\r\n                {\r\n                  dsChiNhanh.find((chiNhanh) => chiNhanh.id === item)\r\n                    ?.tenChiNhanh\r\n                }\r\n              </Tag>\r\n            );\r\n          })\r\n        );\r\n      },\r\n      key: \"chiNhanhMentor\",\r\n      dataIndex: \"chiNhanhMentor\",\r\n    },\r\n  ];\r\n\r\n  const colMentorCoLopGroupByMentor = [\r\n    {\r\n      title: \"Tên mentor\",\r\n      render: (text, record) => {\r\n        return record.HoTen;\r\n      },\r\n      key: \"hoTen\",\r\n      dataIndex: \"hoTen\",\r\n    },\r\n    {\r\n      title: \"Email\",\r\n      render: (text, record) => {\r\n        return record.Email;\r\n      },\r\n      key: \"email\",\r\n      dataIndex: \"email\",\r\n    },\r\n    {\r\n      title: \"Số điện thoại\",\r\n      render: (text, record) => {\r\n        return record.SoDT;\r\n      },\r\n      key: \"soDT\",\r\n      dataIndex: \"soDT\",\r\n    },\r\n    {\r\n      title: \"Lớp đang mentor\",\r\n      render: (text, record) => {\r\n        return record?.DanhSachMaLop && locDanhSachCacLopDangMentor(record?.DanhSachMaLop);\r\n      },\r\n      key: \"cacLopDangMentor\",\r\n      dataIndex: \"cacLopDangMentor\",\r\n    },\r\n    {\r\n      title: \"Các buổi đang mentor\",\r\n      render: (text, record) => {\r\n        \r\n        return record?.DanhSachMaLop && locDanhSachCacBuoiDangMentor(record?.DanhSachMaLop)\r\n      },\r\n      key: \"cacBuoiDangMentor\",\r\n      dataIndex: \"cacBuoiDangMentor\",\r\n    },\r\n    {\r\n      title: \"Số lượng bài quá hạn chưa chấm\",\r\n      render: (text, record) => {\r\n        return tinhSoBaiTapHetHanChuaCham(record);\r\n      },\r\n      key: \"SoLuongBaiQuaHanChuaCham\",\r\n      dataIndex: \"SoLuongBaiQuaHanChuaCham\",\r\n      sorter: (a, b) =>\r\n        tinhSoBaiTapHetHanChuaCham(a) - tinhSoBaiTapHetHanChuaCham(b),\r\n    },\r\n    {\r\n      title: \"Điểm học viên\",\r\n      render: (text, record) => {\r\n        return tinhTongDanhGiaHocVien(record);\r\n      },\r\n      key: \"diemHocVien\",\r\n      dataIndex: \"diemHocVien\",\r\n      sorter: (a, b) => tinhTongDanhGiaHocVien(a) - tinhTongDanhGiaHocVien(b),\r\n    },\r\n\r\n    {\r\n      title: \"Điểm mentor\",\r\n      render: (text, record) => {\r\n        return tinhTongDanhGiaMentor(record);\r\n      },\r\n      key: \"diemMentor\",\r\n      dataIndex: \"diemMentor\",\r\n      sorter: (a, b) => tinhTongDanhGiaMentor(a) - tinhTongDanhGiaMentor(b),\r\n    },\r\n\r\n    {\r\n      title: \"Điểm giảng viên\",\r\n      render: (text, record) => {\r\n        return tinhTongDanhGiaGiangVien(record);\r\n      },\r\n      key: \"diemGiangVien\",\r\n      dataIndex: \"diemGiangVien\",\r\n      sorter: (a, b) =>\r\n        tinhTongDanhGiaGiangVien(a) - tinhTongDanhGiaGiangVien(b),\r\n    },\r\n    {\r\n      title: \"Tổng điểm trung bình đánh giá\",\r\n      render: (text, record) => {\r\n        return tinhTongDiemTrungBinhDanhGia(record);\r\n      },\r\n      key: \"DiemTrungBinhDanhGia\",\r\n      dataIndex: \"DiemTrungBinhDanhGia\",\r\n      sorter: (a, b) =>\r\n        tinhTongDiemTrungBinhDanhGia(a) - tinhTongDiemTrungBinhDanhGia(b),\r\n    },\r\n    \r\n    {\r\n      title: \"Số lượng đánh giá\",\r\n      render: (text, record) => {\r\n       let soLuongDanhGia = tinhSoLuongDanhGia(record);\r\n       return `${soLuongDanhGia[0]}/${soLuongDanhGia[1]}`\r\n      // return soLuongDanhGia\r\n      },\r\n      key: \"SoLuongDanhGia\",\r\n      dataIndex: \"SoLuongDanhGia\",\r\n      sorter: (a, b) =>\r\n      tinhSoLuongDanhGia(a)[0] - tinhSoLuongDanhGia(b)[0],\r\n    },\r\n    \r\n    {\r\n      title: \"Số lớp đang mentor \",\r\n      render: (text, record) => {\r\n        return record.SoLopDangMentor;\r\n      },\r\n      key: \"SoLopDangMentor\",\r\n      dataIndex: \"SoLopDangMentor\",\r\n      sorter: (a, b) => a.SoLopDangMentor - b.SoLopDangMentor,\r\n    },\r\n\r\n    {\r\n      title: \"Action\",\r\n      render: (text, record) => {\r\n        return (\r\n          <button\r\n            className=\"btn btn-success\"\r\n            onClick={() =>\r\n              dispatchLocal({\r\n                type: CONSTANTS.SET_RECORD_XEM_CHI_TIET_DANH_GIA,\r\n                payload: record,\r\n              })\r\n            }\r\n          >\r\n            Xem đánh giá\r\n          </button>\r\n        );\r\n      },\r\n      key: \"Action\",\r\n      dataIndex: \"Action\",\r\n    },\r\n  ];\r\n\r\n  const colMentorCoLop = [\r\n    {\r\n      title: \"Tên mentor\",\r\n      render: (text, record) => {\r\n        return record.HoTen;\r\n      },\r\n      key: \"hoTen\",\r\n      dataIndex: \"hoTen\",\r\n    },\r\n    {\r\n      title: \"Email\",\r\n      render: (text, record) => {\r\n        return record.Email;\r\n      },\r\n      key: \"email\",\r\n      dataIndex: \"email\",\r\n    },\r\n    {\r\n      title: \"Số điện thoại\",\r\n      render: (text, record) => {\r\n        return record.SoDT;\r\n      },\r\n      key: \"soDT\",\r\n      dataIndex: \"soDT\",\r\n    },\r\n    {\r\n      title: \"Tên lớp\",\r\n      render: (text, record) => {\r\n        return record?.MaLop && taoThongTinTenLopHoc(record?.MaLop, LICH_HOC);\r\n      },\r\n      key: \"tenLopHoc\",\r\n      dataIndex: \"tenLopHoc\",\r\n    },\r\n    {\r\n      title: \"Số lượng bài quá hạn chưa chấm\",\r\n      render: (text, record) => {\r\n        return tinhSoBaiTapHetHanChuaCham(record);\r\n      },\r\n      key: \"SoLuongBaiQuaHanChuaCham\",\r\n      dataIndex: \"SoLuongBaiQuaHanChuaCham\",\r\n      sorter: (a, b) =>\r\n        tinhSoBaiTapHetHanChuaCham(a) - tinhSoBaiTapHetHanChuaCham(b),\r\n    },\r\n    {\r\n      title: \"Điểm học viên\",\r\n      render: (text, record) => {\r\n        return tinhTongDanhGiaHocVien(record);\r\n      },\r\n      key: \"diemHocVien\",\r\n      dataIndex: \"diemHocVien\",\r\n      sorter: (a, b) => tinhTongDanhGiaHocVien(a) - tinhTongDanhGiaHocVien(b),\r\n    },\r\n\r\n    {\r\n      title: \"Điểm mentor\",\r\n      render: (text, record) => {\r\n        return tinhTongDanhGiaMentor(record);\r\n      },\r\n      key: \"diemMentor\",\r\n      dataIndex: \"diemMentor\",\r\n      sorter: (a, b) => tinhTongDanhGiaMentor(a) - tinhTongDanhGiaMentor(b),\r\n    },\r\n\r\n    {\r\n      title: \"Điểm giảng viên\",\r\n      render: (text, record) => {\r\n        return tinhTongDanhGiaGiangVien(record);\r\n      },\r\n      key: \"diemGiangVien\",\r\n      dataIndex: \"diemGiangVien\",\r\n      sorter: (a, b) =>\r\n        tinhTongDanhGiaGiangVien(a) - tinhTongDanhGiaGiangVien(b),\r\n    },\r\n    {\r\n      title: \"Tổng điểm trung bình đánh giá\",\r\n      render: (text, record) => {\r\n        return tinhTongDiemTrungBinhDanhGia(record);\r\n      },\r\n      key: \"DiemTrungBinhDanhGia\",\r\n      dataIndex: \"DiemTrungBinhDanhGia\",\r\n      sorter: (a, b) =>\r\n        tinhTongDiemTrungBinhDanhGia(a) - tinhTongDiemTrungBinhDanhGia(b),\r\n    },\r\n    \r\n    {\r\n      title: \"Số lượng đánh giá\",\r\n      render: (text, record) => {\r\n       let soLuongDanhGia = tinhSoLuongDanhGia(record);\r\n       return `${soLuongDanhGia[0]}/${soLuongDanhGia[1]}`\r\n      // return soLuongDanhGia\r\n      },\r\n      key: \"SoLuongDanhGia\",\r\n      dataIndex: \"SoLuongDanhGia\",\r\n      sorter: (a, b) =>\r\n      tinhSoLuongDanhGia(a)[0] - tinhSoLuongDanhGia(b)[0],\r\n    },\r\n\r\n    {\r\n      title: \"Số lớp đang mentor \",\r\n      render: (text, record) => {\r\n        return tinhSoLopDangMentor(record);\r\n      },\r\n      key: \"SoLopDangMentor\",\r\n      dataIndex: \"SoLopDangMentor\",\r\n      sorter: (a, b) => tinhSoLopDangMentor(a) - tinhSoLopDangMentor(b),\r\n    },\r\n\r\n    {\r\n      title: \"Action\",\r\n      render: (text, record) => {\r\n        return (\r\n          <button\r\n            className=\"btn btn-success\"\r\n            onClick={() =>\r\n              dispatchLocal({\r\n                type: CONSTANTS.SET_RECORD_XEM_CHI_TIET_DANH_GIA,\r\n                payload: record,\r\n              })\r\n            }\r\n          >\r\n            Xem đánh giá\r\n          </button>\r\n        );\r\n      },\r\n      key: \"Action\",\r\n      dataIndex: \"Action\",\r\n    },\r\n  ];\r\n\r\n  function handleGetDanhGiaMentorTheoThang(date) {}\r\n  return (\r\n    <>\r\n      <Spin tip=\"Loading....\" spinning={isLoading}>\r\n        <div className=\"container-fluid \">\r\n          <div className=\"row mt-2\">\r\n            <div className=\"col-md-3\">\r\n              <Input.Group compact>\r\n                <Select\r\n                  defaultValue={inputSearchType}\r\n                  style={{ width: \"40%\" }}\r\n                  onSelect={(value) => handleSearch(value, \"type_search\")}\r\n                >\r\n                  <Option value=\"tenLop\">Lớp</Option>\r\n                  <Option value=\"hoTen\">Họ tên</Option>\r\n                  <Option value=\"email\">Email</Option>\r\n                  <Option value=\"soDienThoai\">SDT</Option>\r\n                </Select>\r\n                <Search\r\n                  className=\"input-search\"\r\n                  onChange={(e) => {\r\n                    handleSearch(e.target.value, \"value_search\");\r\n                  }}\r\n                  onSearch={(value) => handleFilterData()}\r\n                  style={{ width: \"59%\" }}\r\n                />\r\n              </Input.Group>\r\n            </div>\r\n            <div className=\"col-md-4\">\r\n              <Input.Group compact>\r\n                <Radio.Button>Theo tháng</Radio.Button>\r\n                <MonthPicker\r\n                  format={\"MM/YYYY\"}\r\n                  value={\r\n                    theoThang == \"null\"\r\n                      ? moment().subtract(1, \"months\")\r\n                      : moment(theoThang)\r\n                  }\r\n                  onChange={(date, dateS) => {\r\n                    // set lại url\r\n                    handleSearch(date, \"theo_month\");\r\n                    dispatch(callApiDanhSachDanhGiaCrmTheoThang(date));\r\n                  }}\r\n                />\r\n              </Input.Group>\r\n            </div>\r\n\r\n            <div className=\"col-md-3\" >\r\n              <Input.Group compact>\r\n                <span className=\"mr-2\" style={{ lineHeight: \"30px\" }}>\r\n                  Thời gian mentor:{\" \"}\r\n                </span>\r\n                <Select\r\n                  value={thoiGianMentor}\r\n                  style={{ width: 100 }}\r\n                  onSelect={(value) => handleSearch(value, \"tgm\")}\r\n                  options={OPTIONS_THOI_GIAN_MENTOR}\r\n                  disabled= {isTatFilterThoiGianVaLopMentor}\r\n                ></Select>\r\n              </Input.Group>\r\n            </div>\r\n\r\n            <div className=\"col-md-2\">\r\n              <b>Tắt filter buổi và chi nhánh mentor:</b>{\" \"}\r\n              <Switch\r\n                checked={isTatFilterThoiGianVaLopMentor}\r\n                onChange={(value) => {\r\n                  handleSearch(value, \"tfbvl\");\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"row mt-2\">\r\n        \r\n\r\n            <div className=\"col-md-12\">\r\n              <span className=\"text-left d-block mb-2\">\r\n                Danh sách chi nhánh check:{\" \"}\r\n              </span>\r\n              <Select\r\n              disabled={isTatFilterThoiGianVaLopMentor}\r\n                mode=\"tags\"\r\n                style={{\r\n                  width: \"100%\",\r\n                }}\r\n                allowClear={true}\r\n                placeholder=\"Chọn chi nhánh cần kiểm tra\"\r\n                value={dsChiNhanhKiemTra}\r\n                onChange={(value) =>\r\n                  handleSearch(JSON.stringify(value), \"dscnkt\")\r\n                }\r\n                options={dsChiNhanh.map((item) => {\r\n                  // console.log(item)\r\n                  return {\r\n                    value: item?.id,\r\n                    label: item?.tenChiNhanh,\r\n                  };\r\n                })}\r\n              />\r\n            </div>\r\n         \r\n          </div>\r\n          <div className=\"row mt-2\">\r\n            <div className=\"col-md-2\">\r\n              <Input.Group compact>\r\n                <Select\r\n                  defaultValue={loaiNguoiDung}\r\n                  style={{ width: 100 }}\r\n                  onSelect={(value) => handleSearch(value, \"loai_gv\")}\r\n                >\r\n                  <Option value={0}>Tất cả</Option>\r\n                  <Option value={1}>Giảng viên</Option>\r\n                  <Option value={2}>Mentor</Option>\r\n                </Select>\r\n              </Input.Group>\r\n            </div>\r\n            <div className=\"col-md-2\">\r\n              <b>Chưa chấm bài:</b>{\" \"}\r\n              <Switch\r\n                checked={isChuaChamBai}\r\n                onChange={(value) => handleSearch(value, \"cb\")}\r\n                disabled={isChuaCoLopMentor}\r\n              />\r\n            </div>\r\n            <div className=\"col-md-2\">\r\n              <b>Không có lớp:</b>{\" \"}\r\n              <Switch\r\n                checked={isChuaCoLopMentor}\r\n                onChange={(value) => {\r\n                  handleSearch(value, \"mtkcl\");\r\n                }}\r\n              />\r\n            </div>\r\n            <div className=\"col-md-2\">\r\n              <b>Group Mentor:</b>{\" \"}\r\n              <Switch\r\n              disabled={isChuaCoLopMentor}\r\n                checked={isGroupByMentor}\r\n                onChange={(value) => {\r\n                  handleSearch(value, \"gbm\");\r\n                }}\r\n              />\r\n            </div>\r\n            <div className=\"col-md-2\">\r\n              <Input.Group compact>\r\n                <button className=\"btn btn-primary\" onClick={handleFilterData}>\r\n                  Lọc dữ liệu\r\n                </button>\r\n              </Input.Group>\r\n            </div>\r\n            <div className=\"col-md-2\">\r\n              <Input.Group compact>\r\n                <button className=\"btn btn-primary\" onClick={handleResetFilter}>\r\n                  Clear Filter\r\n                </button>\r\n              </Input.Group>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <>\r\n          <Table\r\n            bordered\r\n            dataSource={state.data}\r\n            columns={kiemTraTrangThaiTable(isGroupByMentor, isChuaCoLopMentor)}\r\n            // columns={isChuaCoLopMentor ? colMentorChuaCoLop : colMentorCoLop}\r\n            // pagination={{\r\n            //   defaultPageSize: 10,\r\n            //   pageSizeOptions: [\"10\", \"15\", \"20\", \"30\", \"50\"],\r\n            //   showSizeChanger: true,\r\n            // }}\r\n            pagination={false} \r\n            className=\"pr-3 table-striped\"\r\n          ></Table>\r\n          <Modal\r\n            open={state.isModalChiTietDanhGiaVisible}\r\n            title=\"Chi tiết đánh giá mentor\"\r\n            onCancel={() =>\r\n              dispatchLocal({\r\n                type: CONSTANTS.SET_MODAL_CHI_TIET_DANH_GIA_VISIBLE,\r\n                payload: false,\r\n              })\r\n            }\r\n            footer={null}\r\n            width=\"90vw\"\r\n            height=\"90vh\"\r\n            style={{ top: 10 }}\r\n          >\r\n            <div className=\"container\">\r\n              <ChiTietDanhGiaMentorComponent\r\n                record={state.recordDangChon}\r\n                danhMucDanhGia={danhMucDanhGia}\r\n              />\r\n            </div>\r\n          </Modal>\r\n        </>\r\n      </Spin>\r\n    </>\r\n  );\r\n}\r\n\r\nfunction ChiTietDanhGiaMentorComponent(props) {\r\n  const { record, danhMucDanhGia } = props;\r\n  const dispatch = useDispatch();\r\n  const [isHiddenName, setIsHiddenName] = useState(false);\r\n  const [dataTable, setDataTable] = useState([]);\r\n  const [danhSachNhacNho, setDanhSachNhacNho] = useState([]);\r\n  const [isVisibleModalXemNhacNho, setIsVisibleModalXemNhacNho] =\r\n    useState(false);\r\n  const [isVisibleThemNhacNhoModal, setIsVisibleThemNhacNhoModal] =\r\n    useState(false);\r\n  const [modelNhacNho, setModelNhacNho] = useState({});\r\n\r\n  const dsNguoiDung = useSelector((state) => state.userReducer.dsNguoiDung);\r\n  const danhSachLop = useSelector((state) => state.lopHocReducer.danhSachLop);\r\n  let danhSachDanhGia = JSON.parse(record?.DanhSachDanhGia);\r\n\r\n  let lengthDanhSachDanhGia = danhSachDanhGia.length;\r\n\r\n  let lengthDanhMucDanhGia = danhMucDanhGia.length;\r\n\r\n// UseEffect\r\n\r\n  useEffect(() => {\r\n    let isMount = true;\r\n\r\n    if (isMount && record.DanhSachNhacNho !== null) {\r\n      setDanhSachNhacNho(JSON.parse(record.DanhSachNhacNho));\r\n    } else {\r\n      setDanhSachNhacNho([]);\r\n    }\r\n    return () => {\r\n      isMount = false;\r\n    };\r\n  }, [record.MentorId]);\r\n\r\n  useEffect(() => {\r\n    let isMount = true;\r\n\r\n    if (isMount) {\r\n      let mangData = [];\r\n\r\n      for (let i = 0; i < lengthDanhSachDanhGia; i++) {\r\n        let item = danhSachDanhGia[i];\r\n        item.isDanhGia = false;\r\n\r\n        let mangNoiDungDanhGia = [];\r\n        if (item?.NoiDungDanhGia) {\r\n          mangNoiDungDanhGia = JSON.parse(item?.NoiDungDanhGia);\r\n          item.isDanhGia = true;\r\n        }\r\n\r\n        for (let j = 0; j < lengthDanhMucDanhGia; j++) {\r\n          let tenKey = danhMucDanhGia[j];\r\n          item[removeVietnameseTones(tenKey.replaceAll(\" \", \"\"))] =\r\n            item?.isDanhGia ? mangNoiDungDanhGia[j] : \"\";\r\n        }\r\n\r\n        mangData.push(item);\r\n      }\r\n      setDataTable(mangData);\r\n    }\r\n\r\n    return () => {\r\n      isMount = false;\r\n    };\r\n  }, [record.MentorId, record.MaLop]);\r\n\r\n  const handleLuuThongTin = () => {\r\n    // console.log(record)\r\n    let model = {\r\n      MaLop: record.MaLop,\r\n      MaNguoiNhacNho: record.MentorId,\r\n      NoiDungNhacNho: modelNhacNho.noiDungNhacNho,\r\n    };\r\n\r\n    AdminService.themNhacNhoMentorService(model).then((res) => {\r\n      // Set lai model\r\n      message.info(\"Them thanh cong\");\r\n\r\n      // Loi do reducer update nhung khong update lai table nen trick o day la push vao cai mang data hien tai\r\n      let newModelNhacNho = {\r\n        ...model,\r\n        Id: danhSachNhacNho.length + 1,\r\n        DaXoa: false,\r\n        DateTime: new Date(),\r\n        UpdateAt: new Date(),\r\n        LyDoXoa: \"\",\r\n        MaNguoiXoa: \"\",\r\n      };\r\n      let newDanhSachNhacNho = [...danhSachNhacNho, newModelNhacNho];\r\n      setDanhSachNhacNho(newDanhSachNhacNho);\r\n\r\n      setModelNhacNho({});\r\n      setIsVisibleThemNhacNhoModal(false);\r\n      dispatch(updateNhacNhoMentor(model));\r\n    });\r\n  };\r\n\r\n  const columnNhacNho = [\r\n    {\r\n      title: \"Tên người nhắc nhở\",\r\n      render: (text, record) => {\r\n        console.log(dsNguoiDung, record);\r\n        return dsNguoiDung?.find((x) => x.id === record.MaNguoiNhacNho)?.hoTen;\r\n      },\r\n      key: \"TenNguoiNhacNho\",\r\n      dataIndex: \"TenNguoiNhacNho\",\r\n    },\r\n    {\r\n      title: \"Lớp học\",\r\n      render: (text, record) => {\r\n        return danhSachLop?.find((x) => x.id === record.MaLop)?.tenLopHoc;\r\n      },\r\n      key: \"NgayNhacNho\",\r\n      dataIndex: \"NgayNhacNho\",\r\n    },\r\n    ,\r\n    {\r\n      title: \"Ngày nhắc nhở\",\r\n      render: (text, record) => {\r\n        return moment(record.NgayTao).format(\"DD/MM/yyyy\");\r\n      },\r\n      key: \"NgayNhacNho\",\r\n      dataIndex: \"NgayNhacNho\",\r\n    },\r\n    {\r\n      title: \"Nội dung nhắc nhở\",\r\n      render: (text, record) => {\r\n        return record.NoiDungNhacNho;\r\n      },\r\n      key: \"NoiDungNhacNho\",\r\n      dataIndex: \"NoiDungNhacNho\",\r\n    },\r\n  ];\r\n\r\n  const colXemDanhGia = [\r\n    {\r\n      title: \"Tên người dánh giá\",\r\n      render: (text, record) => {\r\n        return isHiddenName ? \"\" : record.TenNguoiDanhGia;\r\n      },\r\n      key: \"TenNguoiDanhGia\",\r\n      dataIndex: \"TenNguoiDanhGia\",\r\n    },\r\n    {\r\n      title: \"Loại đánh giá\",\r\n      render: (text, record) => {\r\n        return record.LoaiDanhGia;\r\n      },\r\n      key: \"LoaiDanhGia\",\r\n      dataIndex: \"LoaiDanhGia\",\r\n      sorter: (a, b) => a.LoaiDanhGia.length - b.LoaiDanhGia.length,\r\n    },\r\n    {\r\n      title: \"Hỗ trợ trên lớp học\",\r\n      render: (text, record) => {\r\n        return (\r\n          <NhanXetHocVienComponent NhanXetHocVien={record.Hotrotrenlophoc} />\r\n        );\r\n      },\r\n      key: \"Hotrotrenlophoc\",\r\n      dataIndex: \"Hotrotrenlophoc\",\r\n    },\r\n    {\r\n      title: \"Ngôn từ giao tiếp\",\r\n      render: (text, record) => {\r\n        return (\r\n          <NhanXetHocVienComponent NhanXetHocVien={record.Ngontugiaotiep} />\r\n        );\r\n      },\r\n      key: \"Ngontugiaotiep\",\r\n      dataIndex: \"Ngontugiaotiep\",\r\n    },\r\n    {\r\n      title: \"Hỗ trợ ngoài giờ\",\r\n      render: (text, record) => {\r\n        return (\r\n          <NhanXetHocVienComponent NhanXetHocVien={record.Hotrongoaigio} />\r\n        );\r\n      },\r\n      key: \"Hotrongoaigio\",\r\n      dataIndex: \"Hotrongoaigio\",\r\n    },\r\n    {\r\n      title: \"Nhiệt tình\",\r\n      render: (text, record) => {\r\n        return <NhanXetHocVienComponent NhanXetHocVien={record.Nhiettinh} />;\r\n      },\r\n      key: \"Nhiettinh\",\r\n      dataIndex: \"Nhiettinh\",\r\n    },\r\n    {\r\n      title: \"Chia sẻ kiến thức\",\r\n      render: (text, record) => {\r\n        return (\r\n          <NhanXetHocVienComponent NhanXetHocVien={record.Chiasekienthuc} />\r\n        );\r\n      },\r\n      key: \"Chiasekienthuc\",\r\n      dataIndex: \"Chiasekienthuc\",\r\n    },\r\n    {\r\n      title: \"Thái độ hỗ trợ\",\r\n      render: (text, record) => {\r\n        return <NhanXetHocVienComponent NhanXetHocVien={record.Thaidohotro} />;\r\n      },\r\n      key: \"Thaidohotro\",\r\n      dataIndex: \"Thaidohotro\",\r\n    },\r\n    ,\r\n    {\r\n      title: \"Đánh giá\",\r\n      render: (text, record) => {\r\n        return record?.isDanhGia ? <p>X</p> : null;\r\n      },\r\n      key: \"Thaidohotro\",\r\n      dataIndex: \"Thaidohotro\",\r\n      sorter: (a, b) => a.isDanhGia - b.isDanhGia,\r\n    },\r\n  ];\r\n\r\n  const handleChangeInput = (e) => {\r\n    let newModelNhacNho = { ...modelNhacNho };\r\n    newModelNhacNho[e.target.name] = e.target.value;\r\n    setModelNhacNho(newModelNhacNho);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div>\r\n        <div className=\"d-flex justify-content-between\">\r\n          <h5>\r\n            {record.TenLopHoc} - {record.HoTen}\r\n          </h5>\r\n          <Badge count={record?.DanhSachNhacNho ? danhSachNhacNho.length : 0}>\r\n            <button\r\n              className=\"btn btn-primary\"\r\n              onClick={() => setIsVisibleModalXemNhacNho(true)}\r\n            >\r\n              Xem ghi chú\r\n            </button>\r\n          </Badge>\r\n        </div>\r\n\r\n        <h6>\r\n          Có {dataTable?.filter((x) => x.isDanhGia).length} / {dataTable.length}{\" \"}\r\n          lượt đánh giá\r\n        </h6>\r\n        <div className=\"col-md-2\">\r\n          <b>Ẩn tên người đánh giá:</b>{\" \"}\r\n          <Switch\r\n            checked={isHiddenName}\r\n            onChange={(value) => {\r\n              setIsHiddenName(value);\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n      <Table\r\n        bordered\r\n        dataSource={dataTable}\r\n        columns={colXemDanhGia}\r\n        // pagination={{\r\n        //   defaultPageSize: 10,\r\n        //   pageSizeOptions: [\"10\", \"15\", \"20\", \"30\", \"50\"],\r\n        //   showSizeChanger: true,\r\n        // }}\r\n        pagination={false} \r\n        className=\"pr-3 table-striped\"\r\n      ></Table>\r\n      <Modal\r\n        open={isVisibleModalXemNhacNho}\r\n        title=\"Danh sách đã nhắc nhở\"\r\n        onCancel={() => setIsVisibleModalXemNhacNho(false)}\r\n        footer={null}\r\n        width=\"90vw\"\r\n        height=\"90vh\"\r\n        style={{ top: 10 }}\r\n      >\r\n        <div className=\"text-right mb-2\">\r\n          <button\r\n            className=\"btn btn-success \"\r\n            onClick={() => setIsVisibleThemNhacNhoModal(true)}\r\n          >\r\n            Thêm nhắc nhở\r\n          </button>\r\n        </div>\r\n\r\n        <Table\r\n          bordered\r\n          dataSource={danhSachNhacNho}\r\n          columns={columnNhacNho}\r\n          // pagination={{\r\n          //   defaultPageSize: 10,\r\n          //   pageSizeOptions: [\"10\", \"15\", \"20\", \"30\", \"50\"],\r\n          //   showSizeChanger: true,\r\n          // }}\r\n          pagination={false} \r\n          className=\"pr-3 table-striped\" \r\n        ></Table>\r\n        <Modal\r\n          open={isVisibleThemNhacNhoModal}\r\n          title=\"Them Nhac Nho\"\r\n          onCancel={() => setIsVisibleThemNhacNhoModal(false)}\r\n          footer={null}\r\n          width=\"50vw\"\r\n          height=\"50vh\"\r\n          style={{ top: 10 }}\r\n        >\r\n          <div className=\"container\">\r\n            <div className=\"row\">\r\n              <div className=\"col-12\" id=\"editProjectForm\">\r\n                <div className=\"form-group\">\r\n                  <label className=\"font-bold\">Nội dung nhắc nhở: </label>\r\n                  <textarea\r\n                    className=\"form-control\"\r\n                    name=\"noiDungNhacNho\"\r\n                    rows={6}\r\n                    value={\r\n                      modelNhacNho?.noiDungNhacNho\r\n                        ? modelNhacNho.noiDungNhacNho\r\n                        : \"\"\r\n                    }\r\n                    onChange={(e) => handleChangeInput(e)}\r\n                    placeholder=\"Bạn hãy nhập nội dung đã nhắc nhở mentor\"\r\n                  />\r\n                </div>\r\n                <Popconfirm\r\n                  title=\"Bạn có chắc muốn thêm nhắc nhở\"\r\n                  onConfirm={() => handleLuuThongTin()}\r\n                >\r\n                  <button className=\"btn btn-primary\">Thêm nhắc nhở</button>\r\n                </Popconfirm>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </Modal>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\nfunction NhanXetHocVienComponent(props) {\r\n  const { DiemDanhGia, NhanXet } = props?.NhanXetHocVien;\r\n\r\n  // }\r\n  return (\r\n    <>\r\n      {DiemDanhGia ? <h6>Điểm: {DiemDanhGia}</h6> : null}\r\n\r\n      {NhanXet && NhanXet?.trim() !== \"\" ? <h6>Nhận xét : {NhanXet}</h6> : null}\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
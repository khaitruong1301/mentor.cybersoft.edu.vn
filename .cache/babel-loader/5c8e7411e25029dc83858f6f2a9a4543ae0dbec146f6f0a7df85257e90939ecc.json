{"ast":null,"code":"//rxslice\nimport { createSlice } from \"@reduxjs/toolkit\";\nimport { AdminService } from \"../../services/AdminService\";\nconst initialState = {\n  danhMucDanhGia: [],\n  danhSachDanhGia: [],\n  danhSachDanhGiaCrm: [],\n  danhSachMentorChuaChamBai: {},\n  danhSachDanhGiaCrmTheoThang: [],\n  isLoading: false\n};\nconst danhGiaMentorReducer = createSlice({\n  name: \"danhGiaMentorReducer\",\n  initialState,\n  reducers: {\n    getDanhMucDanhGia: (state, _ref) => {\n      let {\n        type,\n        payload\n      } = _ref;\n      state.danhMucDanhGia = payload;\n      return state;\n    },\n    getDanhSachDanhGia: (state, _ref2) => {\n      let {\n        type,\n        payload\n      } = _ref2;\n      state.danhSachDanhGia = payload;\n      return state;\n    },\n    getDanhSachDanhGiaCrm: (state, _ref3) => {\n      let {\n        type,\n        payload\n      } = _ref3;\n      state.danhSachDanhGiaCrm = payload;\n      return state;\n    },\n    getLayDanhSachMentorChuaChamBai: (state, _ref4) => {\n      let {\n        type,\n        payload\n      } = _ref4;\n      state.danhSachMentorChuaChamBai = payload;\n      return state;\n    },\n    getDanhSachDanhGiaCrmTheoThang: (state, _ref5) => {\n      let {\n        type,\n        payload\n      } = _ref5;\n      state.danhSachDanhGiaCrmTheoThang = payload;\n      state.isLoading = false;\n      return state;\n    },\n    updateNhacNhoMentor: (state, _ref6) => {\n      let {\n        type,\n        payload\n      } = _ref6;\n      let newDanhSachDanhGiaCrmTheoThang = [...state.danhSachDanhGiaCrmTheoThang];\n      const lengthDanhGia = newDanhSachDanhGiaCrmTheoThang.length;\n      let newModelNhacNho = {\n        ...payload,\n        Id: 0,\n        DaXoa: false,\n        DateTime: new Date(),\n        UpdateAt: new Date(),\n        LyDoXoa: \"\",\n        MaNguoiXoa: \"\"\n      };\n      let isTimThay = false;\n      let strNewDanhSachNhacNho = null;\n      for (let i = 0; i < lengthDanhGia; i++) {\n        let recordCheck = newDanhSachDanhGiaCrmTheoThang[i];\n        if (recordCheck.MentorId !== newModelNhacNho.MaNguoiNhacNho) {\n          continue;\n        }\n        if (!isTimThay) {\n          // Co nhac nho thi bind vao con khong thi tao moi\n          let newArray = recordCheck.DanhSachNhacNho ? JSON.parse(recordCheck.DanhSachNhacNho) : [];\n          newModelNhacNho.Id = newArray.length + 1;\n          newArray.push(newModelNhacNho);\n          strNewDanhSachNhacNho = JSON.stringify(newArray);\n          recordCheck.DanhSachNhacNho = strNewDanhSachNhacNho;\n          isTimThay = true;\n          continue;\n        }\n        recordCheck.DanhSachNhacNho = strNewDanhSachNhacNho;\n      }\n      state.danhSachDanhGiaCrmTheoThang = newDanhSachDanhGiaCrmTheoThang;\n      return state;\n    },\n    updateLoading: (state, _ref7) => {\n      let {\n        type,\n        payload\n      } = _ref7;\n      state.isLoading = payload;\n      return state;\n    }\n  }\n});\n\n//quản lý actions\nexport const {\n  getDanhMucDanhGia,\n  getDanhSachDanhGia,\n  getDanhSachDanhGiaCrm,\n  getLayDanhSachMentorChuaChamBai,\n  getDanhSachDanhGiaCrmTheoThang,\n  updateNhacNhoMentor,\n  updateLoading\n} = danhGiaMentorReducer.actions;\nexport default danhGiaMentorReducer.reducer;\n\n// closure function\nexport const callApiMucDanhGia = () => async dispatch => {\n  const apiMucDanhGia = await AdminService.layDanhMucDanhGiaService();\n  dispatch(getDanhMucDanhGia(apiMucDanhGia.data.content));\n};\nexport const callApiDanhSachDanhGia = () => async dispatch => {\n  const apiDanhSachDanhGia = await AdminService.layDanhSachDanhGiaService();\n  dispatch(getDanhSachDanhGia(apiDanhSachDanhGia.data.content));\n};\nexport const callApiDanhSachDanhGiaCrm = () => async dispatch => {\n  const apiDanhSachDanhGiaCrm = await AdminService.layDanhSachDanhGiaCrmService();\n  dispatch(getDanhSachDanhGiaCrm(apiDanhSachDanhGiaCrm.data.content));\n};\nexport const callApiLayDanhSachMentorChuaChamBai = () => async dispatch => {\n  const apiLayDanhSachMentorChuaChamBai = await AdminService.layDanhSachMentorChuaChamBaiService();\n  dispatch(getLayDanhSachMentorChuaChamBai(apiLayDanhSachMentorChuaChamBai.data.content));\n};\nexport const callApiDanhSachDanhGiaCrmTheoThang = model => async dispatch => {\n  dispatch(updateLoading(true));\n  const apiDanhSachDanhGiaCrmTheoThang = await AdminService.layDanhSachDanhGiaCrmTheoThangService(model);\n  dispatch(getDanhSachDanhGiaCrmTheoThang(apiDanhSachDanhGiaCrmTheoThang.data.content));\n};","map":{"version":3,"names":["createSlice","AdminService","initialState","danhMucDanhGia","danhSachDanhGia","danhSachDanhGiaCrm","danhSachMentorChuaChamBai","danhSachDanhGiaCrmTheoThang","isLoading","danhGiaMentorReducer","name","reducers","getDanhMucDanhGia","state","type","payload","getDanhSachDanhGia","getDanhSachDanhGiaCrm","getLayDanhSachMentorChuaChamBai","getDanhSachDanhGiaCrmTheoThang","updateNhacNhoMentor","newDanhSachDanhGiaCrmTheoThang","lengthDanhGia","length","newModelNhacNho","Id","DaXoa","DateTime","Date","UpdateAt","LyDoXoa","MaNguoiXoa","isTimThay","strNewDanhSachNhacNho","i","recordCheck","MentorId","MaNguoiNhacNho","newArray","DanhSachNhacNho","JSON","parse","push","stringify","updateLoading","actions","reducer","callApiMucDanhGia","dispatch","apiMucDanhGia","layDanhMucDanhGiaService","data","content","callApiDanhSachDanhGia","apiDanhSachDanhGia","layDanhSachDanhGiaService","callApiDanhSachDanhGiaCrm","apiDanhSachDanhGiaCrm","layDanhSachDanhGiaCrmService","callApiLayDanhSachMentorChuaChamBai","apiLayDanhSachMentorChuaChamBai","layDanhSachMentorChuaChamBaiService","callApiDanhSachDanhGiaCrmTheoThang","model","apiDanhSachDanhGiaCrmTheoThang","layDanhSachDanhGiaCrmTheoThangService"],"sources":["D:/BIG-PROJECT/WIKI/FE/crmmentor/src/redux/reducers/danhGiaMentorReducer.js"],"sourcesContent":["//rxslice\r\nimport { createSlice } from \"@reduxjs/toolkit\";\r\nimport { AdminService } from \"../../services/AdminService\";\r\n\r\nconst initialState = {\r\n  danhMucDanhGia: [],\r\n  danhSachDanhGia: [],\r\n  danhSachDanhGiaCrm: [],\r\n  danhSachMentorChuaChamBai: {},\r\n  danhSachDanhGiaCrmTheoThang: [],\r\n  isLoading: false\r\n};\r\n\r\nconst danhGiaMentorReducer = createSlice({\r\n  name: \"danhGiaMentorReducer\",\r\n  initialState,\r\n  reducers: {\r\n    getDanhMucDanhGia: (state, { type, payload }) => {\r\n      state.danhMucDanhGia = payload;\r\n      return state;\r\n    },\r\n    getDanhSachDanhGia: (state, { type, payload }) => {\r\n      state.danhSachDanhGia = payload;\r\n      return state;\r\n    },\r\n    getDanhSachDanhGiaCrm: (state, { type, payload }) => {\r\n      state.danhSachDanhGiaCrm = payload;\r\n      return state;\r\n    },\r\n    getLayDanhSachMentorChuaChamBai: (state, { type, payload }) => {\r\n      state.danhSachMentorChuaChamBai = payload;\r\n      return state;\r\n    },\r\n    getDanhSachDanhGiaCrmTheoThang: (state, { type, payload }) => {\r\n      state.danhSachDanhGiaCrmTheoThang = payload;\r\n      state.isLoading = false\r\n      return state;\r\n    },\r\n    updateNhacNhoMentor: (state, { type, payload }) => {\r\n      let newDanhSachDanhGiaCrmTheoThang = [\r\n        ...state.danhSachDanhGiaCrmTheoThang,\r\n      ];\r\n\r\n      const lengthDanhGia = newDanhSachDanhGiaCrmTheoThang.length;\r\n\r\n      let newModelNhacNho = {\r\n        ...payload,\r\n        Id: 0,\r\n        DaXoa: false,\r\n        DateTime: new Date(),\r\n        UpdateAt: new Date(),\r\n        LyDoXoa: \"\",\r\n        MaNguoiXoa: \"\",\r\n      };\r\n      let isTimThay = false;\r\n      let strNewDanhSachNhacNho = null;\r\n\r\n      for (let i = 0; i < lengthDanhGia; i++) {\r\n        let recordCheck = newDanhSachDanhGiaCrmTheoThang[i];\r\n        if (recordCheck.MentorId !== newModelNhacNho.MaNguoiNhacNho) {\r\n          continue;\r\n        }\r\n\r\n        if (!isTimThay) {\r\n          // Co nhac nho thi bind vao con khong thi tao moi\r\n         let newArray = recordCheck.DanhSachNhacNho\r\n            ? JSON.parse(recordCheck.DanhSachNhacNho)\r\n            : [];\r\n          newModelNhacNho.Id = newArray.length + 1;\r\n\r\n          newArray.push(newModelNhacNho);\r\n\r\n          strNewDanhSachNhacNho = JSON.stringify(newArray);\r\n          recordCheck.DanhSachNhacNho = strNewDanhSachNhacNho;\r\n          isTimThay = true\r\n          continue;\r\n        }\r\n\r\n        recordCheck.DanhSachNhacNho = strNewDanhSachNhacNho;\r\n      }\r\n      state.danhSachDanhGiaCrmTheoThang = newDanhSachDanhGiaCrmTheoThang\r\n      return state\r\n\r\n    },\r\n    updateLoading: (state, { type, payload }) => {\r\n      state.isLoading = payload;\r\n      return state;\r\n    },\r\n  },\r\n});\r\n\r\n//quản lý actions\r\nexport const {\r\n  getDanhMucDanhGia,\r\n  getDanhSachDanhGia,\r\n  getDanhSachDanhGiaCrm,\r\n  getLayDanhSachMentorChuaChamBai,\r\n  getDanhSachDanhGiaCrmTheoThang,\r\n  updateNhacNhoMentor,\r\n  updateLoading\r\n} = danhGiaMentorReducer.actions;\r\n\r\nexport default danhGiaMentorReducer.reducer;\r\n\r\n// closure function\r\nexport const callApiMucDanhGia = () => async (dispatch) => {\r\n  const apiMucDanhGia = await AdminService.layDanhMucDanhGiaService();\r\n\r\n  dispatch(getDanhMucDanhGia(apiMucDanhGia.data.content));\r\n};\r\n\r\nexport const callApiDanhSachDanhGia = () => async (dispatch) => {\r\n  const apiDanhSachDanhGia = await AdminService.layDanhSachDanhGiaService();\r\n\r\n  dispatch(getDanhSachDanhGia(apiDanhSachDanhGia.data.content));\r\n};\r\n\r\nexport const callApiDanhSachDanhGiaCrm = () => async (dispatch) => {\r\n  const apiDanhSachDanhGiaCrm =\r\n    await AdminService.layDanhSachDanhGiaCrmService();\r\n\r\n  dispatch(getDanhSachDanhGiaCrm(apiDanhSachDanhGiaCrm.data.content));\r\n};\r\n\r\nexport const callApiLayDanhSachMentorChuaChamBai = () => async (dispatch) => {\r\n  const apiLayDanhSachMentorChuaChamBai =\r\n    await AdminService.layDanhSachMentorChuaChamBaiService();\r\n\r\n  dispatch(\r\n    getLayDanhSachMentorChuaChamBai(\r\n      apiLayDanhSachMentorChuaChamBai.data.content\r\n    )\r\n  );\r\n};\r\n\r\nexport const callApiDanhSachDanhGiaCrmTheoThang =\r\n  (model) => async (dispatch) => {\r\n\r\n    dispatch(updateLoading(true))\r\n\r\n    const apiDanhSachDanhGiaCrmTheoThang =\r\n      await AdminService.layDanhSachDanhGiaCrmTheoThangService(model);\r\n\r\n    dispatch(\r\n      getDanhSachDanhGiaCrmTheoThang(\r\n        apiDanhSachDanhGiaCrmTheoThang.data.content\r\n      )\r\n    );\r\n  };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _slicedToArray from\"D:/BIG-PROJECT/WIKI/FE/crmmentor/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{Input,Tag,Tooltip,Drawer}from'antd';import{DateFormat}from'../../utils/DateFormat';import{layTenBuoi}from'../../utils/SelectOption';import{useSelector}from'react-redux';import{ListXepHangDanhGia}from'../../utils/ListChuaCham';import{ChiTietDanhGia}from'./ChiTietDanhGia';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Search=Input.Search;var lopToiDa=4;export var CardMentor=function CardMentor(props){var dsMentor=props.dsMentor,dsKhachHang=props.dsKhachHang,dsLop=props.dsLop,mentorTrong=props.mentorTrong;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),openDrawer=_useState2[0],setOpenDrawer=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),danhGiaTheoMentor=_useState4[0],setDanhGiaTheoMentor=_useState4[1];var danhMucDanhGia=useSelector(function(state){return state.danhGiaMentorReducer.danhMucDanhGia;});var danhSachDanhGia=useSelector(function(state){return state.danhGiaMentorReducer.danhSachDanhGia;});var listDanhGia=ListXepHangDanhGia(danhSachDanhGia);var showDrawer=function showDrawer(mentorId){var danhSachDanhGiaTheoMentor=danhSachDanhGia.filter(function(n){return n.mentorId==mentorId;});setDanhGiaTheoMentor(danhSachDanhGiaTheoMentor);setOpenDrawer(true);};var onClose=function onClose(){setOpenDrawer(false);};var groupLopMentor=function groupLopMentor(mentorId){var dataLop=[];dsLop.map(function(item){if(item.danhSachMentor.find(function(n){return n==mentorId;})){dataLop.push(item);}});return dataLop;};return/*#__PURE__*/_jsxs(\"div\",{className:\"row overflow-auto bg-light\",style:{height:\"100vh\"},children:[dsMentor.map(function(item){var _khachHang$,_khachHang$2;var khachHang=dsKhachHang===null||dsKhachHang===void 0?void 0:dsKhachHang.filter(function(n){return n.thongTinKH.email==item.email;});var lstLopMentor=groupLopMentor(item.id);if(mentorTrong==true&&lstLopMentor.length>=lopToiDa){return;}var danhGia=listDanhGia.find(function(n){return n.mentorId==item.id;});return/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6  col-xl-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card mt-2  \".concat(danhGia&&danhGia.top&&'rainbow'),children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header font-weight-bold\",children:/*#__PURE__*/_jsxs(_Fragment,{children:[item.hoTen,\" \",danhGia&&danhGia.top&&/*#__PURE__*/_jsxs(Tag,{color:\"red\",children:[\"TOP \",danhGia.top]}),\" \",/*#__PURE__*/_jsx(\"br\",{}),(_khachHang$=khachHang[0])!==null&&_khachHang$!==void 0&&_khachHang$.linkFacebook?/*#__PURE__*/_jsxs(\"a\",{href:(_khachHang$2=khachHang[0])===null||_khachHang$2===void 0?void 0:_khachHang$2.linkFacebook,target:\"_blank\",children:[\" \",/*#__PURE__*/_jsx(Tag,{color:\"blue\",children:\"Facebook\"})]}):/*#__PURE__*/_jsx(Tag,{children:\"Ch\\u01B0a c\\xF3 face\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(Tooltip,{color:\"blue\",title:lstLopMentor.map(function(itemLop){var thoiKhoaBieu=itemLop.thoiKhoaBieu?JSON.parse(itemLop.thoiKhoaBieu):[];return/*#__PURE__*/_jsxs(Tag,{className:\"mb-2\",color:\"volcano\",children:[itemLop.tenLopHoc,\" \",thoiKhoaBieu.map(function(itemTKB){return\", \".concat(layTenBuoi(itemTKB));}),/*#__PURE__*/_jsx(\"br\",{}),\"(end: \",DateFormat(itemLop.ngayKetThuc),\")\"]});}),children:/*#__PURE__*/_jsxs(Tag,{color:\"blue\",children:[\"L\\u1EDBp mentor: \",lstLopMentor.length,\"/\",lopToiDa,\" \",/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-eye\"}),\" \"]})}),/*#__PURE__*/_jsx(\"p\",{}),/*#__PURE__*/_jsx(Tooltip,{placement:\"bottom\",title:\"T\\u1ED5ng \\u0111i\\u1EC3m v\\xE0 s\\u1ED1 l\\u01B0\\u1EE3ng l\\u01B0\\u1EE3t \\u0111\\xE1nh gi\\xE1. Ch\\u1EC9 c\\u1ED9ng \\u0111i\\u1EC3m \\u0111\\xE1nh gi\\xE1 kh\\xE1 tr\\u1EDF l\\xEAn (4 v\\xE0 5 \\u0111i\\u1EC3m).\",children:/*#__PURE__*/_jsxs(Tag,{color:\"magenta\",children:[\" \",danhGia?/*#__PURE__*/_jsxs(\"a\",{onClick:function onClick(){return showDrawer(item.id);},children:[\" \",danhGia.tongDiem,\" \\u0111i\\u1EC3m / \",danhGia.soLuong,\" l\\u01B0\\u1EE3t  \\u0111\\xE1nh gi\\xE1 \"]}):\"Ch\\u01B0a c\\xF3 \\u0111\\xE1nh gi\\xE1\",\" \"]})})]})]})});}),/*#__PURE__*/_jsx(Drawer,{size:\"large\",title:\"Chi ti\\u1EBFt \\u0111\\xE1nh gi\\xE1\",placement:\"right\",onClose:onClose,open:openDrawer,children:/*#__PURE__*/_jsx(ChiTietDanhGia,{danhMucDanhGia:danhMucDanhGia,danhGiaTheoMentor:danhGiaTheoMentor})})]});};","map":{"version":3,"names":["React","useState","Input","Tag","Tooltip","Drawer","DateFormat","layTenBuoi","useSelector","ListXepHangDanhGia","ChiTietDanhGia","Search","lopToiDa","CardMentor","props","dsMentor","dsKhachHang","dsLop","mentorTrong","openDrawer","setOpenDrawer","danhGiaTheoMentor","setDanhGiaTheoMentor","danhMucDanhGia","state","danhGiaMentorReducer","danhSachDanhGia","listDanhGia","showDrawer","mentorId","danhSachDanhGiaTheoMentor","filter","n","onClose","groupLopMentor","dataLop","map","item","danhSachMentor","find","push","height","khachHang","thongTinKH","email","lstLopMentor","id","length","danhGia","top","hoTen","linkFacebook","itemLop","thoiKhoaBieu","JSON","parse","tenLopHoc","itemTKB","ngayKetThuc","tongDiem","soLuong"],"sources":["D:/BIG-PROJECT/WIKI/FE/crmmentor/src/components/cardmentor/CardMentor.jsx"],"sourcesContent":["import React, { useState } from 'react'\r\nimport { Input, Tag, Tooltip, Drawer } from 'antd';\r\nimport { DateFormat } from '../../utils/DateFormat';\r\nimport { layTenBuoi } from '../../utils/SelectOption';\r\nimport { useSelector } from 'react-redux';\r\nimport { ListXepHangDanhGia } from '../../utils/ListChuaCham';\r\nimport { ChiTietDanhGia } from './ChiTietDanhGia';\r\n\r\nconst { Search } = Input;\r\n\r\nconst lopToiDa = 4;\r\nexport const CardMentor = (props) => {\r\n\r\n    let { dsMentor, dsKhachHang, dsLop, mentorTrong } = props;\r\n\r\n    const [openDrawer, setOpenDrawer] = useState(false);\r\n    const [danhGiaTheoMentor, setDanhGiaTheoMentor] = useState([]);\r\n\r\n    const danhMucDanhGia = useSelector(state => state.danhGiaMentorReducer.danhMucDanhGia);\r\n    const danhSachDanhGia = useSelector(state => state.danhGiaMentorReducer.danhSachDanhGia);\r\n    const listDanhGia = ListXepHangDanhGia(danhSachDanhGia);\r\n\r\n    const showDrawer = (mentorId) => {\r\n        let danhSachDanhGiaTheoMentor = danhSachDanhGia.filter(n => n.mentorId == mentorId);\r\n        setDanhGiaTheoMentor(danhSachDanhGiaTheoMentor)\r\n        setOpenDrawer(true);\r\n    };\r\n\r\n    const onClose = () => {\r\n        setOpenDrawer(false);\r\n    };\r\n\r\n\r\n\r\n\r\n    const groupLopMentor = (mentorId) => {\r\n\r\n        let dataLop = [];\r\n        dsLop.map(item => {\r\n            if (item.danhSachMentor.find(n => n == mentorId)) {\r\n                dataLop.push(item);\r\n            }\r\n        })\r\n        return dataLop;\r\n    }\r\n\r\n    return (\r\n        <div className='row overflow-auto bg-light' style={{ height: \"100vh\" }}>\r\n            {dsMentor.map(item => {\r\n\r\n                let khachHang = dsKhachHang?.filter(n => n.thongTinKH.email == item.email);\r\n                let lstLopMentor = groupLopMentor(item.id);\r\n                if (mentorTrong == true && lstLopMentor.length >= lopToiDa) {\r\n                    return;\r\n                }\r\n\r\n                let danhGia = listDanhGia.find(n => n.mentorId == item.id);\r\n\r\n                return <div className=\"col-lg-6  col-xl-3\">\r\n                    <div className={`card mt-2  ${danhGia && danhGia.top && 'rainbow'}`}>\r\n                        <div className=\"card-header font-weight-bold\">\r\n                            {<>\r\n                                {/* <button className='btn btn-sm btn-success'><i className='fa fa-pencil'></i></button> */}\r\n                                {item.hoTen} {danhGia && danhGia.top && <Tag color='red'>TOP {danhGia.top}</Tag>} <br />\r\n\r\n                                {khachHang[0]?.linkFacebook ? <a href={khachHang[0]?.linkFacebook} target=\"_blank\"> <Tag color=\"blue\" >Facebook</Tag></a> : <Tag>Chưa có face</Tag>}\r\n                            </>}\r\n                        </div>\r\n                        <div className=\"card-body\">\r\n                            <Tooltip color=\"blue\" title={\r\n                                lstLopMentor.map(itemLop => {\r\n                                    const thoiKhoaBieu = itemLop.thoiKhoaBieu ? JSON.parse(itemLop.thoiKhoaBieu) : [];\r\n                                    return <Tag className='mb-2' color='volcano'>{itemLop.tenLopHoc} {thoiKhoaBieu.map(itemTKB => `, ${layTenBuoi(itemTKB)}`)}\r\n                                        <br />\r\n                                        (end: {DateFormat(itemLop.ngayKetThuc)})</Tag>\r\n                                })\r\n                            } >\r\n                                <Tag color=\"blue\">Lớp mentor: {lstLopMentor.length}/{lopToiDa} <i className='fa fa-eye'></i> </Tag>\r\n                            </Tooltip>\r\n                            <p></p>\r\n                            <Tooltip  placement=\"bottom\" title=\"Tổng điểm và số lượng lượt đánh giá. Chỉ cộng điểm đánh giá khá trở lên (4 và 5 điểm).\">\r\n                                <Tag color='magenta'> {danhGia ? <a onClick={() => showDrawer(item.id)}> {danhGia.tongDiem} điểm / {danhGia.soLuong} lượt  đánh giá </a> : `Chưa có đánh giá`} </Tag>\r\n                            </Tooltip>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n\r\n            })}\r\n\r\n            <Drawer size=\"large\" title=\"Chi tiết đánh giá\" placement=\"right\" onClose={onClose} open={openDrawer}>\r\n                <ChiTietDanhGia danhMucDanhGia={danhMucDanhGia} danhGiaTheoMentor={danhGiaTheoMentor}/>\r\n            </Drawer>\r\n        </div >\r\n    )\r\n\r\n\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
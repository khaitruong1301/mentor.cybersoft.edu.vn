{"ast":null,"code":"import _slicedToArray from\"D:/BIG-PROJECT/WIKI/FE/crmmentor/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Spin,Table,message}from\"antd\";import React,{useEffect,useState,useMemo,useReducer}from\"react\";import{useSearchParams}from\"react-router-dom\";import moment from\"moment\";import{useSelector,useDispatch}from\"react-redux\";import{NguoiDungService}from'../../services/NguoiDungService';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function QuanLyDanhSachMentor(){//Search params\nvar _useSearchParams=useSearchParams({}),_useSearchParams2=_slicedToArray(_useSearchParams,2),searchParams=_useSearchParams2[0],setSearchParams=_useSearchParams2[1];//   let dsChiNhanhKiemTra = searchParams.get(\"dscnkt\")\n//     ? JSON.parse(searchParams.get(\"dscnkt\"))\n//     : [];\n//   let isChuaCoLopMentor = +searchParams.get(\"mtkcl\");\n//   let isGroupByMentor = +searchParams.get(\"gbm\");\n//Use Selector\nvar dsNguoiDung=useSelector(function(state){return state.userReducer.dsNguoiDung;});var danhSachMentorChiNhanh=useSelector(function(state){return state.quanLyMentorReducer.danhSachMentorChiNhanh;});// CONST\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var colsTableQuanLyMentor=[{title:\"Tên mentor\",render:function render(text,record){return record.hoTen;},key:\"hoTen\",dataIndex:\"hoTen\"},{title:\"Email\",render:function render(text,record){return record.email;},key:\"email\",dataIndex:\"email\"},{title:\"Số điện thoại\",render:function render(text,record){return record.soDT;},key:\"soDT\",dataIndex:\"soDT\"},{title:\"Chưa đăng ký mentor\",render:function render(text,record){return(danhSachMentorChiNhanh===null||danhSachMentorChiNhanh===void 0?void 0:danhSachMentorChiNhanh.findIndex(function(item){return item.id===record.id;}))===-1?/*#__PURE__*/_jsx(\"span\",{children:\"X\"}):\"\";},key:\"chuaDangKyMentor\",dataIndex:\"chuaDangKyMentor\"},{title:\"Action\",render:function render(text,record){return/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success\",onClick:function onClick(){return handleXoaMentor(record.id);},children:\"Xo\\xE1 mentor\"});},key:\"Action\",dataIndex:\"Action\"}];//Use Effect\nuseEffect(function(){var isMount=true;if(isMount&&(dsNguoiDung===null||dsNguoiDung===void 0?void 0:dsNguoiDung.length)>0){setData(locMentorTuNguoiDung(dsNguoiDung));}return function(){isMount=false;};},[dsNguoiDung.length]);// Function\nfunction locMentorTuNguoiDung(dsNguoiDung){var dsNguoiDungLength=dsNguoiDung.length;var dataFiltered=[];for(var i=0;i<dsNguoiDungLength;i++){var record=dsNguoiDung[i];if(record.maNhomQuyen!==\"MENTOR\"){continue;}dataFiltered.push(record);}return dataFiltered;}//handle\nfunction handleXoaMentor(idMentor){//\nNguoiDungService.xoaMentorNguoiDungService(idMentor).then(function(res){message.info(\"Đã xoá thành công\");var newData=[];for(var i=0;i<data.length;i++){var nguoiDung=data[i];// console.log(nguoiDung)\nif(nguoiDung.id===idMentor){continue;}newData.push(nguoiDung);}setData(newData);});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Danh S\\xE1ch Mentor\"}),/*#__PURE__*/_jsx(Spin,{spinning:(dsNguoiDung===null||dsNguoiDung===void 0?void 0:dsNguoiDung.length)>0?false:true,tip:\"Loading....\",children:/*#__PURE__*/_jsx(Table,{className:\"table table-striped\",columns:colsTableQuanLyMentor,dataSource:data,bordered:true,pagination:{defaultPageSize:10,pageSizeOptions:[\"10\",\"15\",\"20\",\"30\",\"50\"],showSizeChanger:true}})})]});}","map":{"version":3,"names":["Spin","Table","message","React","useEffect","useState","useMemo","useReducer","useSearchParams","moment","useSelector","useDispatch","NguoiDungService","QuanLyDanhSachMentor","searchParams","setSearchParams","dsNguoiDung","state","userReducer","danhSachMentorChiNhanh","quanLyMentorReducer","data","setData","colsTableQuanLyMentor","title","render","text","record","hoTen","key","dataIndex","email","soDT","findIndex","item","id","handleXoaMentor","isMount","length","locMentorTuNguoiDung","dsNguoiDungLength","dataFiltered","i","maNhomQuyen","push","idMentor","xoaMentorNguoiDungService","then","res","info","newData","nguoiDung","defaultPageSize","pageSizeOptions","showSizeChanger"],"sources":["D:/BIG-PROJECT/WIKI/FE/crmmentor/src/pages/quan-ly-danh-sach-mentor/QuanLyDanhSachMentor.js"],"sourcesContent":["import { Spin, Table, message } from \"antd\";\r\nimport React, { useEffect, useState, useMemo, useReducer } from \"react\";\r\nimport { useSearchParams } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\n\r\nimport {NguoiDungService} from '../../services/NguoiDungService'\r\n\r\nexport default function QuanLyDanhSachMentor() {\r\n  //Search params\r\n  let [searchParams, setSearchParams] = useSearchParams({});\r\n\r\n  //   let dsChiNhanhKiemTra = searchParams.get(\"dscnkt\")\r\n  //     ? JSON.parse(searchParams.get(\"dscnkt\"))\r\n  //     : [];\r\n  //   let isChuaCoLopMentor = +searchParams.get(\"mtkcl\");\r\n  //   let isGroupByMentor = +searchParams.get(\"gbm\");\r\n\r\n  //Use Selector\r\n\r\n  const dsNguoiDung = useSelector((state) => state.userReducer.dsNguoiDung);\r\n\r\n  const danhSachMentorChiNhanh = useSelector((state) => state.quanLyMentorReducer.danhSachMentorChiNhanh);\r\n\r\n  // CONST\r\n\r\n  const [data, setData] = useState([]);\r\n\r\n  const colsTableQuanLyMentor = [\r\n    {\r\n      title: \"Tên mentor\",\r\n      render: (text, record) => {\r\n        return record.hoTen;\r\n      },\r\n      key: \"hoTen\",\r\n      dataIndex: \"hoTen\",\r\n    },\r\n    {\r\n      title: \"Email\",\r\n      render: (text, record) => {\r\n        return record.email;\r\n      },\r\n      key: \"email\",\r\n      dataIndex: \"email\",\r\n    },\r\n    {\r\n      title: \"Số điện thoại\",\r\n      render: (text, record) => {\r\n        return record.soDT;\r\n      },\r\n      key: \"soDT\",\r\n      dataIndex: \"soDT\",\r\n    },\r\n    {\r\n      title: \"Chưa đăng ký mentor\",\r\n      render: (text, record) => {\r\n        return danhSachMentorChiNhanh?.findIndex((item) => item.id === record.id) === -1 ? (<span>X</span>) : \"\";\r\n      },\r\n      key: \"chuaDangKyMentor\",\r\n      dataIndex: \"chuaDangKyMentor\",\r\n      \r\n    },\r\n    {\r\n      title: \"Action\",\r\n      render: (text, record) => {\r\n        return <button className=\"btn btn-success\" onClick={() => handleXoaMentor(record.id) }>Xoá mentor</button>;\r\n      },\r\n      key: \"Action\",\r\n      dataIndex: \"Action\",\r\n    },\r\n  ];\r\n\r\n  //Use Effect\r\n\r\n  useEffect(() => {\r\n    let isMount = true;\r\n\r\n    if (isMount && dsNguoiDung?.length > 0) {\r\n      setData(locMentorTuNguoiDung(dsNguoiDung));\r\n    }\r\n\r\n    return () => {\r\n      isMount = false;\r\n    };\r\n  }, [dsNguoiDung.length]);\r\n\r\n  // Function\r\n  function locMentorTuNguoiDung(dsNguoiDung) {\r\n    let dsNguoiDungLength = dsNguoiDung.length;\r\n    let dataFiltered = [];\r\n    for (let i = 0; i < dsNguoiDungLength; i++) {\r\n      let record = dsNguoiDung[i];\r\n      if (record.maNhomQuyen !== \"MENTOR\") {\r\n        continue;\r\n      }\r\n      dataFiltered.push(record);\r\n    }\r\n    return dataFiltered;\r\n  }\r\n\r\n  //handle\r\n  function handleXoaMentor(idMentor) {\r\n\r\n    //\r\n    NguoiDungService.xoaMentorNguoiDungService(idMentor)\r\n    .then((res) => {\r\n        message.info(\"Đã xoá thành công\")\r\n        let newData = []\r\n\r\n        for(let i = 0;i < data.length; i++) {\r\n            let nguoiDung = data[i]\r\n            // console.log(nguoiDung)\r\n            if (nguoiDung.id === idMentor) {\r\n                continue\r\n            }\r\n            newData.push(nguoiDung)\r\n        }\r\n        setData(newData)\r\n    })\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <h2>Danh Sách Mentor</h2>\r\n      <Spin spinning={dsNguoiDung?.length > 0 ? false : true} tip=\"Loading....\">\r\n        <Table\r\n        className=\"table table-striped\"\r\n          columns={colsTableQuanLyMentor}\r\n          dataSource={data}\r\n          bordered\r\n          pagination={{\r\n            defaultPageSize: 10,\r\n            pageSizeOptions: [\"10\", \"15\", \"20\", \"30\", \"50\"],\r\n            showSizeChanger: true,\r\n          }}\r\n        ></Table>\r\n      </Spin>\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}